!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).VScale={})}(this,(function(t){"use strict";!function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new r(i,s||t,a),h=n?n+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),o.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,a=new Array(s);r<s;r++)a[r]=i[r].fn;return a},o.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},o.prototype.emit=function(t,e,i,r,s,a){var o=n?n+t:t;if(!this._events[o])return!1;var h,l,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,s),!0;case 6:return c.fn.call(c.context,e,i,r,s,a),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var d,g=c.length;for(l=0;l<g;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,r);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];c[l].fn.apply(c[l].context,h)}}return!0},o.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},o.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},o.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||a(this,s);else{for(var h=0,l=[],c=o.length;h<c;h++)(o[h].fn!==e||r&&!o[h].once||i&&o[h].context!==i)&&l.push(o[h]);l.length?this._events[s]=1===l.length?l[0]:l:a(this,s)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}({exports:{}});var e=(t,e)=>Object.prototype.toString.call(t)===`[object ${e}]`;var n=t=>null==t;var i=t=>null!=t;var r=function(t){const n=typeof t;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"string"===n:"string"===n||e(t,"String")};var s=t=>Array.isArray?Array.isArray(t):e(t,"Array");var a=function(t){const n=typeof t;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"number"===n:"number"===n||e(t,"Number")};var o=t=>a(t)&&Number.isFinite(t);function h(t,e){if(!s(t)||!s(e))return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function l(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function c(t){return Number(t)}function u(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;const i=t.length;if(!i)return;if(e<=0||i<2)return n(t[0],0,t);if(e>=1)return n(t[i-1],i-1,t);const r=(i-1)*e,s=Math.floor(r),a=n(t[s],s,t);return a+(n(t[s+1],s+1,t)-a)*(r-s)}function d(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;for(n(r)&&(r=t.length);i<r;){const n=i+r>>>1;l(t[n],e)>0?r=n:i=n+1}return i}const g=Math.sqrt(50),m=Math.sqrt(10),_=Math.sqrt(2);function f(t,e,n){const i=Math.abs(e-t)/Math.max(0,n);let r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10));const s=i/r;return s>=g?r*=10:s>=m?r*=5:s>=_&&(r*=2),e<t?-r:r}const p=1e-10,M=1e-10;function w(t,e){const n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:M)*Math.max(t,e);return Math.abs(t-e)<=Math.max(n,i)}function b(t,e,n,i){return t>e&&!w(t,e,n,i)}function y(t,e,n,i){return t<e&&!w(t,e,n,i)}const v=t=>{let e=null,n=null;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e&&r.every(((t,n)=>t===e[n]))||(e=r,n=t(...r)),n}},x=function(t){let e="",n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)-1;for(;n>=0;)e=`${e}${t}`,n-=1;return e};var S=function(t,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"right";const i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",r=t+"",s=e-r.length;return s<=0?r:"left"===n?x(i,s)+r:"center"===n?x(i,Math.floor(s/2))+r+x(i,Math.ceil(s/2)):r+x(i,s)};var F=function(t,e,n){return t<e?e:t>n?n:t};function T(t,e){let n;return t>e&&(n=t,t=e,e=n),n=>Math.max(t,Math.min(e,n))}function k(t,e){return n=>t*(1-n)+e*n}function E(t,e){return function(n){return Math.round(t*(1-n)+e*n)}}const D=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function N(t){if(t instanceof Date)return t;if(r(t)){const e=D.exec(t);if(!e)return new Date(NaN);if(!e[8])return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0);let n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}return n(t)?new Date(NaN):new Date(Math.round(t))}function C(t,e,n){e/=100,n/=100;const i=(1-Math.abs(2*n-1))*e,r=i*(1-Math.abs(t/60%2-1)),s=n-i/2;let a=0,o=0,h=0;return 0<=t&&t<60?(a=i,o=r,h=0):60<=t&&t<120?(a=r,o=i,h=0):120<=t&&t<180?(a=0,o=i,h=r):180<=t&&t<240?(a=0,o=r,h=i):240<=t&&t<300?(a=r,o=0,h=i):300<=t&&t<360&&(a=i,o=0,h=r),a=Math.round(255*(a+s)),o=Math.round(255*(o+s)),h=Math.round(255*(h+s)),{r:a,g:o,b:h}}function R(t,e,n){t/=255,e/=255,n/=255;const i=Math.min(t,e,n),r=Math.max(t,e,n),s=r-i;let a=0,o=0,h=0;return a=0===s?0:r===t?(e-n)/s%6:r===e?(n-t)/s+2:(t-e)/s+4,a=Math.round(60*a),a<0&&(a+=360),h=(r+i)/2,o=0===s?0:s/(1-Math.abs(2*h-1)),o=+(100*o).toFixed(1),h=+(100*h).toFixed(1),{h:a,s:o,l:h}}const U=/^#([0-9a-f]{3,8})$/,B={transparent:4294967040},L={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function O(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function A(t){return a(t)?new Y(t>>16,t>>8&255,255&t,1):s(t)?new Y(t[0],t[1],t[2]):new Y(255,255,255)}function H(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function I(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class V{static Brighter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1===e?t:new V(t).brighter(e).toRGBA()}static SetOpacity(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1===e?t:new V(t).setOpacity(e).toRGBA()}static getColorBrightness(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hsl";const n=t instanceof V?t:new V(t);switch(e){case"hsv":default:return n.getHSVBrightness();case"hsl":return n.getHSLBrightness();case"lum":return n.getLuminance();case"lum2":return n.getLuminance2();case"lum3":return n.getLuminance3()}}static parseColorString(t){if(i(B[t]))return function(t){return a(t)?new Y(t>>>24,t>>>16&255,t>>>8&255,255&t):s(t)?new Y(t[0],t[1],t[2],t[3]):new Y(255,255,255,1)}(B[t]);if(i(L[t]))return A(L[t]);const e=`${t}`.trim().toLowerCase(),n=U.exec(e);if(n){const t=parseInt(n[1],16),e=n[1].length;return 3===e?new Y((t>>8&15)+((t>>8&15)<<4),(t>>4&15)+((t>>4&15)<<4),(15&t)+((15&t)<<4),1):6===e?A(t):8===e?new Y(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):void 0}if(/^(rgb|RGB|rgba|RGBA)/.test(e)){const t=e.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new Y(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10),parseFloat(t[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(e)){const t=e.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),n=C(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10));return new Y(n.r,n.g,n.b,parseFloat(t[3]))}}constructor(t){const e=V.parseColorString(t);e?this.color=e:(console.warn(`Warn: 传入${t}无法解析为Color`),this.color=new Y(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(t){const{r:e,g:n,b:i}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t))),this.color.g=Math.max(0,Math.min(255,Math.floor(n*t))),this.color.b=Math.max(0,Math.min(255,Math.floor(i*t))),this}add(t){const{r:e,g:n,b:i}=this.color;return this.color.r+=Math.min(255,e+t.color.r),this.color.g+=Math.min(255,n+t.color.g),this.color.b+=Math.min(255,i+t.color.b),this}sub(t){return this.color.r=Math.max(0,this.color.r-t.color.r),this.color.g=Math.max(0,this.color.g-t.color.g),this.color.b=Math.max(0,this.color.b-t.color.b),this}multiply(t){const{r:e,g:n,b:i}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(n*t.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(i*t.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return.5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(t,e,i){const r=this.color.opacity,s=R(this.color.r,this.color.g,this.color.b),a=C(n(t)?s.h:F(t,0,360),n(e)?s.s:e>=0&&e<=1?100*e:e,n(i)?s.l:i<=1&&i>=0?100*i:i);return this.color=new Y(a.r,a.g,a.b,r),this}setRGB(t,e,i){return!n(t)&&(this.color.r=t),!n(e)&&(this.color.g=e),!n(i)&&(this.color.b=i),this}setHex(t){const e=`${t}`.trim().toLowerCase(),n=U.exec(e),i=parseInt(n[1],16),r=n[1].length;return 3===r?new Y((i>>8&15)+((i>>8&15)<<4),(i>>4&15)+((i>>4&15)<<4),(15&i)+((15&i)<<4),1):6===r?A(i):8===r?new Y(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):this}setColorName(t){const e=L[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}setScalar(t){return this.color.r=t,this.color.g=t,this.color.b=t,this}setOpacity(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.color.opacity=t,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}clone(){return new V(this.color.toString())}copyGammaToLinear(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.color.r=Math.pow(t.color.r,e),this.color.g=Math.pow(t.color.g,e),this.color.b=Math.pow(t.color.b,e),this}copyLinearToGamma(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=e>0?1/e:1;return this.color.r=Math.pow(t.color.r,n),this.color.g=Math.pow(t.color.g,n),this.color.b=Math.pow(t.color.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.color.r=H(t.color.r),this.color.g=H(t.color.g),this.color.b=H(t.color.b),this}copyLinearToSRGB(t){return this.color.r=I(t.color.r),this.color.g=I(t.color.g),this.color.b=I(t.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}}class Y{constructor(t,e,n,r){this.r=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.g=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.b=isNaN(+n)?255:Math.max(0,Math.min(255,+n)),i(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return`#${O(this.r)+O(this.g)+O(this.b)+(1===this.opacity?"":O(255*this.opacity))}`}formatRgb(){const t=this.opacity;return`${1===t?"rgb(":"rgba("}${this.r},${this.g},${this.b}${1===t?")":`,${t})`}`}formatHsl(){const t=this.opacity,{h:e,s:n,l:i}=R(this.r,this.g,this.b);return`${1===t?"hsl(":"hsla("}${e},${n}%,${i}%${1===t?")":`,${t})`}`}toString(){return this.formatHex()}}var q=Object.freeze({__proto__:null,Color:V,DEFAULT_COLORS:L,RGB:Y,hexToRgb:function(t){let e="",n="",i="";const r="#"===t[0]?1:0;for(let s=r;s<t.length;s++)"#"!==t[s]&&(s<r+2?e+=t[s]:s<r+4?n+=t[s]:s<r+6&&(i+=t[s]));return[parseInt(e,16),parseInt(n,16),parseInt(i,16)]},hslToRgb:C,interpolateRgb:function(t,e){const n=t.r,i=e.r,r=t.g,s=e.g,a=t.b,o=e.b,h=t.opacity,l=e.opacity;return t=>{const e=Math.round(n*(1-t)+i*t),c=Math.round(r*(1-t)+s*t),u=Math.round(a*(1-t)+o*t);return new Y(e,c,u,h*(1-t)+l*t)}},rgbToHex:function(t,e,n){return Number((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},rgbToHsl:R});function $(t){return t?"getUTCFullYear":"getFullYear"}function G(t){return t?"getUTCMonth":"getMonth"}function j(t){return t?"getUTCDate":"getDate"}function P(t){return t?"getUTCHours":"getHours"}function z(t){return t?"getUTCMinutes":"getMinutes"}function W(t){return t?"getUTCSeconds":"getSeconds"}function Q(t){return t?"getUTCMilliseconds":"getMilliseconds"}function Z(t){return t?"setUTCFullYear":"setFullYear"}function J(t,e){return n=>{const i=N(n),r=i[$(e)](),s=i[G(e)]()+1,a=Math.floor((s-1)/3)+1,o=i[j(e)](),h=i["get"+(e?"UTC":"")+"Day"](),l=i[P(e)](),c=(l-1)%12+1,u=i[z(e)](),d=i[W(e)](),g=i[Q(e)]();return(t||"").replace(/YYYY/g,S(r+"",4,"0","left")).replace(/yyyy/g,r+"").replace(/yy/g,r%100+"").replace(/Q/g,a+"").replace(/MM/g,S(s,2,"0","left")).replace(/M/g,s+"").replace(/dd/g,S(o,2,"0","left")).replace(/d/g,o+"").replace(/e/g,h+"").replace(/HH/g,S(l,2,"0","left")).replace(/H/g,l+"").replace(/hh/g,S(c+"",2,"0","left")).replace(/h/g,c+"").replace(/mm/g,S(u,2,"0","left")).replace(/m/g,u+"").replace(/ss/g,S(d,2,"0","left")).replace(/s/g,d+"").replace(/SSS/g,S(g,3,"0","left")).replace(/S/g,g+"")}}const K=1e3,X=6e4,tt=36e5,et=24*tt,nt=31*et,it=365*et,rt=t=>(t.setMonth(0,1),t.setHours(0,0,0,0),t),st=(t,e)=>(t.setFullYear(t.getFullYear()+e),t),at=(t,e)=>e.getFullYear()-t.getFullYear(),ot=t=>t.getFullYear(),ht=t=>(t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t),lt=(t,e)=>(t.setUTCFullYear(t.getUTCFullYear()+e),t),ct=(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),ut=t=>t.getUTCFullYear(),dt=t=>(t.setDate(1),t.setHours(0,0,0,0),t),gt=(t,e)=>(t.setMonth(t.getMonth()+e),t),mt=(t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()),_t=t=>t.getMonth(),ft=t=>(t.setUTCDate(1),t.setUTCHours(0,0,0,0),t),pt=(t,e)=>(t.setUTCMonth(t.getUTCMonth()+e),t),Mt=(t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear()),wt=t=>t.getUTCMonth(),bt=t=>(t.setHours(0,0,0,0),t),yt=(t,e)=>(t.setDate(t.getDate()+e),t),vt=(t,e)=>(+e-+t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/et,xt=t=>t.getDate()-1,St=t=>(t.setUTCHours(0,0,0,0),t),Ft=(t,e)=>(t.setUTCDate(t.getUTCDate()+e),t),Tt=(t,e)=>(+e-+t)/et,kt=t=>t.getUTCDate()-1,Et=t=>(t.setTime(+t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes()),t),Dt=(t,e)=>(t.setHours(t.getHours()+e),t),Nt=(t,e)=>(+e-+t)/tt,Ct=t=>t.getHours(),Rt=t=>(t.setTime(+t-t.getUTCMilliseconds()-1e3*t.getUTCSeconds()-6e4*t.getUTCMinutes()),t),Ut=(t,e)=>(t.setUTCHours(t.getUTCHours()+e),t),Bt=t=>t.getUTCHours(),Lt=t=>(t.setTime(+t-t.getMilliseconds()-1e3*t.getSeconds()),t),Ot=(t,e)=>(t.setMinutes(t.getMinutes()+e),t),At=(t,e)=>(+e-+t)/6e4,Ht=t=>t.getMinutes(),It=t=>(t.setTime(+t-t.getUTCMilliseconds()-1e3*t.getUTCSeconds()),t),Vt=(t,e)=>(t.setUTCMinutes(t.getUTCMinutes()+e),t),Yt=t=>t.getUTCMinutes(),qt=t=>(t.setTime(+t-t.getMilliseconds()),t),$t=(t,e)=>(t.setSeconds(t.getSeconds()+e),t),Gt=(t,e)=>(+e-+t)/1e3,jt=t=>t.getSeconds(),Pt=t=>(t.setTime(+t-t.getUTCMilliseconds()),t),zt=(t,e)=>(t.setUTCSeconds(t.getUTCSeconds()+e),t),Wt=t=>t.getUTCSeconds(),Qt=t=>t,Zt=(t,e)=>(t.setTime(+t+e),t),Jt=(t,e)=>+e-+t,Kt=(t,e)=>n=>{const i=new Date(+n-1);return e(i,1),t(i),i},Xt=(t,e)=>{let{floor:n,offset:i,field:r,count:s}=e;const a=Math.floor(t);if(!Number.isFinite(a)||a<=0)return null;if(a<=1)return{floor:n,offset:i,ceil:Kt(n,i)};const o=((t,e)=>(n,i)=>{const r=new Date,s=new Date;return r.setTime(+n),s.setTime(+i),t(r),t(s),Math.floor(e(r,s))})(n,s),h=r?t=>r(t)%a==0:t=>o(0,t)%a==0,l=t=>{if(!Number.isNaN(+t))for(n(t);!h(t);)t.setTime(+t-1),n(t);return t},c=(t,e)=>{if(!Number.isNaN(+t))if(a<0)for(;++e<=0;)for(i(t,-1);!h(t);)i(t,-1);else for(;--e>=0;)for(i(t,1);!h(t);)i(t,1);return t};return{floor:l,offset:c,ceil:Kt(l,c)}};var te;t.ScaleEnum=void 0,(te=t.ScaleEnum||(t.ScaleEnum={})).Identity="identity",te.Linear="linear",te.Log="log",te.Pow="pow",te.Sqrt="sqrt",te.Symlog="symlog",te.Time="time",te.Quantile="quantile",te.Quantize="quantize",te.Threshold="threshold",te.Ordinal="ordinal",te.Point="point",te.Band="band";const ee={};function ne(t){return t}Object.values(t.ScaleEnum).forEach((t=>{ee[t]=!0}));const ie=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t),re=t=>t<0?-Math.sqrt(-t):Math.sqrt(t),se=t=>t<0?-t*t:t*t,ae=t=>-Math.log(-t),oe=t=>-Math.exp(-t),he=t=>isFinite(t)?Math.pow(10,t):t<0?0:t,le=t=>10===t?he:t===Math.E?Math.exp:e=>Math.pow(t,e),ce=t=>t===Math.E?Math.log:10===t?Math.log10:2===t?Math.log2:(t=Math.log(t),e=>Math.log(e)/t),ue=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),de=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t;function ge(t,e){if(t=Number(t),e=Number(e),e-=t)return n=>(n-t)/e;const n=Number.isNaN(e)?NaN:.5;return()=>n}function me(t,e,n){const i=t[0],r=t[1],s=e[0],a=e[1];let o,h;return r<i?(o=ge(r,i),h=n(a,s)):(o=ge(i,r),h=n(s,a)),t=>h(o(t))}function _e(t,e,n){let i;return i=1===t?t+2*n:t-e+2*n,t?i>0?i:1:0}function fe(t,e,n,i){1===n&&(n=0);return _e(t,n,i)*(e/(1-n))}function pe(t,e){const n=(t[1]-t[0])/(e[1]-e[0]),i=t[0]-n*e[0];return[i,n+i]}function Me(t,e,n){const i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i);let a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=ge(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(e){const n=d(t,e,1,i)-1;return s[n](r[n](e))}}const we=(t,e)=>{const n=t.slice();let i=0,r=n.length-1,s=n[i],a=n[r];return a<s&&([i,r]=[r,i],[s,a]=[a,s]),n[i]=e.floor(s),n[r]=e.ceil(a),n},be=(t,e=!1)=>{const n=Math.floor(Math.log10(t)),i=t/Math.pow(10,n);let r;return r=e?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10,r*Math.pow(10,n)};class ye{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(t){return this._wholeRange?this._wholeRange:i(this._rangeFactorStart)&&i(this._rangeFactorEnd)&&2===t.length?(this._wholeRange=pe(t,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):t}rangeFactor(t,e,n){return t?(2===t.length&&t.every((t=>t>=0&&t<=1))&&(this._wholeRange=null,0===t[0]&&1===t[1]?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t[0],this._rangeFactorEnd=t[1])),this):n?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):i(this._rangeFactorStart)&&i(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(t,e){var i;return n(t)?this._rangeFactorStart:(t>=0&&t<=1&&(this._wholeRange=null,0!==t||!n(this._rangeFactorEnd)&&1!==this._rangeFactorEnd?(this._rangeFactorStart=t,this._rangeFactorEnd=null!==(i=this._rangeFactorEnd)&&void 0!==i?i:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}rangeFactorEnd(t,e){var i;return n(t)?this._rangeFactorEnd:(t>=0&&t<=1&&(this._wholeRange=null,0!==t||!n(this._rangeFactorStart)&&0!==this._rangeFactorStart?(this._rangeFactorEnd=t,this._rangeFactorStart=null!==(i=this._rangeFactorStart)&&void 0!==i?i:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}generateFishEyeTransform(){var t;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);const{distortion:e=2,radiusRatio:i=.1,radius:r}=this._fishEyeOptions,s=this.range(),a=s[0],o=s[s.length-1],h=Math.min(a,o),l=Math.max(a,o),c=F(null!==(t=this._fishEyeOptions.focus)&&void 0!==t?t:0,h,l),u=n(r)?(l-h)*i:r;let d=Math.exp(e);d=d/(d-1)*u;const g=e/u;this._fishEyeTransform=t=>{const e=Math.abs(t-c);if(e>=u)return t;if(e<=1e-6)return c;const n=d*(1-Math.exp(-e*g))/e*.75+.25;return c+(t-c)*n}}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}}const ve=Symbol("implicit");class xe extends ye{specified(t){var e;return t?(this._specified=Object.assign(null!==(e=this._specified)&&void 0!==e?e:{},t),this):Object.assign({},this._specified)}_getSpecifiedValue(t){if(this._specified)return this._specified[t]}constructor(){super(),this.type=t.ScaleEnum.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=ve}clone(){return(new xe).domain(this._domain).range(this._ordinalRange).unknown(this._unknown)}calculateVisibleDomain(t){if(i(this._rangeFactorStart)&&i(this._rangeFactorEnd)&&2===t.length){return[this.invert(t[0]),this.invert(t[1])]}return this._domain}scale(t){const e=`${t}`,n=this._getSpecifiedValue(e);if(void 0!==n)return n;let i=this._index.get(e);if(!i){if(this._unknown!==ve)return this._unknown;i=this._domain.push(t),this._index.set(e,i)}const r=this._ordinalRange[(i-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(r):r}invert(t){let e=0;for(;e<this._ordinalRange.length&&this._ordinalRange[e]!==t;)e++;return this._domain[(e-1)%this._domain.length]}domain(t){if(!t)return this._domain.slice();this._domain=[],this._index=new Map;for(const e of t){const t=`${e}`;this._index.has(t)||this._index.set(t,this._domain.push(e))}return this}range(t){if(!t)return this._ordinalRange.slice();const e=Array.from(t);return this._ordinalRange=e,this}}function Se(t,e,n,i){let r;const s=[];let a;if(e=Math.floor(+e),t=Math.floor(+t),!(n=Math.floor(+n)))return[];if(t===e)return[t];if(r=e<t){const n=t;t=e,e=n}let o=T(1,e-t+1)(n);if(a=Math.floor((e-t+1)/o),!i)for(;Math.ceil((e-t+1)/a)>n&&o>1;)o-=1,a=Math.floor((e-t)/o);let h=t;for(;h<=e;)s.push(h),h+=a;return r&&s.reverse(),s}class Fe extends xe{constructor(e){super(),this.type=t.ScaleEnum.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(e)}rescale(t,e){if(t)return this;this._wholeRange=null;const n=this._calculateWholeRange(this._range,e),i=super.domain().length,r=n[1]<n[0];let s=n[Number(r)-0];const a=n[1-Number(r)],o=_e(i,this._paddingInner,this._paddingOuter);return this._step=(a-s)/Math.max(1,o||1),this._round&&(this._step=Math.floor(this._step)),s+=(a-s-this._step*(i-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(s=Math.round(s),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:r,start:r?s+this._step*(i-1):s,count:i},this.generateFishEyeTransform(),this}scale(t){if(!this._bandRangeState)return;const e=`${t}`,n=this._getSpecifiedValue(e);if(void 0!==n)return n;let i=this._index.get(e);if(!i){if(this._unknown!==ve)return this._unknown;i=this._domain.push(t),this._index.set(e,i)}const{count:r,start:s,reverse:a}=this._bandRangeState,o=s+(a?-1:1)*((i-1)%r)*this._step;return this._fishEyeTransform?this._fishEyeTransform(o):o}_calculateWholeRange(t,e){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let e;if(i(this._rangeFactorStart)&&i(this._rangeFactorEnd)&&2===t.length){const n=pe(t,[this._rangeFactorStart,this._rangeFactorEnd]);e=Math.abs(n[1]-n[0])}else e=Math.abs(t[1]-t[0]);const n=function(t,e,n,i,r){const s=_e(t,n,i);let a=e/Math.max(1,s||1);r&&(a=Math.floor(a));let o=a*(1-n);return r&&(o=Math.round(o)),o}(super.domain().length,e,this._paddingInner,this._paddingOuter,this._round);n<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):n>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=n,this._isFixed=!1)}if(this.isBandwidthFixed()){const n=fe(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(t[1]-t[0]),r=Math.min((t[1]-t[0])/n,1);if(i(this._rangeFactorStart)&&i(this._rangeFactorEnd)){if(n>0){const e=t[0]-n*this._rangeFactorStart,i=e+n;this._wholeRange=[e,i]}else{const e=t[1]+n*(1-this._rangeFactorEnd),i=e-n;this._wholeRange=[i,e]}const i=this._rangeFactorStart+r<=1,s=this._rangeFactorEnd-r>=0;"rangeFactorStart"===e&&i?this._rangeFactorEnd=this._rangeFactorStart+r:"rangeFactorEnd"===e&&s?this._rangeFactorStart=this._rangeFactorEnd-r:t[0]<=t[1]?i?this._rangeFactorEnd=this._rangeFactorStart+r:s?this._rangeFactorStart=this._rangeFactorEnd-r:(this._rangeFactorStart=0,this._rangeFactorEnd=r):s?this._rangeFactorStart=this._rangeFactorEnd-r:i?this._rangeFactorEnd=this._rangeFactorStart+r:(this._rangeFactorStart=1-r,this._rangeFactorEnd=1)}else this._rangeFactorStart=0,this._rangeFactorEnd=r,this._wholeRange=[t[0],t[0]+n];return this._wholeRange}return super._calculateWholeRange(t)}calculateWholeRangeSize(){const t=this._calculateWholeRange(this._range);return Math.abs(t[1]-t[0])}calculateVisibleDomain(t){const e=this._domain;if(i(this._rangeFactorStart)&&i(this._rangeFactorEnd)&&e.length){const n=this._getInvertIndex(t[0]),i=this._getInvertIndex(t[1]);return e.slice(Math.min(n,i),Math.max(n,i)+1)}return e}domain(t,e){return t?(super.domain(t),this.rescale(e)):super.domain()}range(t,e){return t?(this._range=[c(t[0]),c(t[1])],this.rescale(e)):this._range}rangeRound(t,e){return this._range=[c(t[0]),c(t[1])],this._round=!0,this.rescale(e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);if(-1===t)return e;return Se(0,e.length-1,t,!1).map((t=>e[t]))}tickData(t=10){return this.ticks(t).map(((t,e)=>({index:e,tick:t,value:(this.scale(t)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])})))}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return Se(0,e.length-1,t,!0).filter((t=>t<e.length)).map((t=>e[t]))}stepTicks(t){const e=this.calculateVisibleDomain(this._range),n=function(t,e,n){const i=[];let r;if(n=T(1,(e=Math.floor(+e))-(t=Math.floor(+t))+1)(Math.floor(+n)),r=e<t){const n=t;t=e,e=n}let s=t;for(;s<=e;)i.push(s),s+=n;return r&&i.reverse(),i}(0,e.length-1,t);return n.map((t=>e[t]))}_getInvertIndex(t){let e=0;const n=this.step()/2,i=this.bandwidth()/2,r=this._domain.length,s=this.range(),a=s[0]>s[s.length-1];for(e=0;e<r;e++){const s=this.scale(this._domain[e])+i;if(0===e&&(!a&&!b(t,s+n)||a&&!y(t,s-n)))break;if(e===r-1)break;if(!y(t,s-n)&&!b(t,s+n))break}return e>=0&&e<=r-1?e:r-1}invert(t){return this._domain[this._getInvertIndex(t)]}padding(t,e){return void 0!==t?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(t)?Math.min.apply(null,t):t)),this._paddingInner=this._paddingOuter,this.rescale(e)):this._paddingInner}paddingInner(t,e){return void 0!==t?(this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingInner}paddingOuter(t,e){return void 0!==t?(this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingOuter}step(){return this._step}round(t,e){return void 0!==t?(this._round=t,this.rescale(e)):this._round}align(t,e){return void 0!==t?(this._align=Math.max(0,Math.min(1,t)),this.rescale(e)):this._align}rangeFactor(t,e){return t?(super.rangeFactor(t),this.rescale(e)):super.rangeFactor()}rangeFactorStart(t,e){return n(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this.rescale(e,"rangeFactorStart"))}rangeFactorEnd(t,e){return n(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this.rescale(e,"rangeFactorEnd"))}bandwidth(t,e){return t?("auto"===t?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=t,this._isFixed=!0),this._userBandwidth=t,this.rescale(e)):this._bandwidth}maxBandwidth(t,e){return t?(this._maxBandwidth="auto"===t?void 0:t,this.rescale(e)):this._maxBandwidth}minBandwidth(t,e){return t?(this._minBandwidth="auto"===t?void 0:t,this.rescale(e)):this._minBandwidth}fishEye(t,e,n){return t||n?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&a(this._userBandwidth)}clone(){var t,e,n;return new Fe(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth(null!==(t=this._userBandwidth)&&void 0!==t?t:"auto",!0).maxBandwidth(null!==(e=this._maxBandwidth)&&void 0!==e?e:"auto",!0).minBandwidth(null!==(n=this._maxBandwidth)&&void 0!==n?n:"auto")}}const{interpolateRgb:Te}=q;function ke(t,e){const i=typeof e;let r;if(n(e)||"boolean"===i)return()=>e;if("number"===i)return k(t,e);if("string"===i){if(r=V.parseColorString(e)){const e=Te(V.parseColorString(t),r);return t=>e(t).formatRgb()}return k(Number(t),Number(e))}return e instanceof Y?Te(t,e):e instanceof V?Te(t.color,e.color):e instanceof Date?function(t,e){const n=t.valueOf(),i=e.valueOf(),r=new Date;return t=>(r.setTime(n*(1-t)+i*t),r)}(t,e):k(Number(t),Number(e))}class Ee extends ye{constructor(t=ne,e=ne){super(),this._unknown=void 0,this.transformer=t,this.untransformer=e,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=ne,this._piecewise=me,this._interpolate=ke}calculateVisibleDomain(t){var e;if(i(this._rangeFactorStart)&&i(this._rangeFactorEnd)&&2===t.length){return[this.invert(t[0]),this.invert(t[1])]}return null!==(e=this._niceDomain)&&void 0!==e?e:this._domain}fishEye(t,e,n){return t||n?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}scale(t){var e;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise((null!==(e=this._niceDomain)&&void 0!==e?e:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const n=this._output(this.transformer(this._clamp(t)));return this._fishEyeTransform?this._fishEyeTransform(n):n}invert(t){var e;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),(null!==(e=this._niceDomain)&&void 0!==e?e:this._domain).map(this.transformer),k)),this._clamp(this.untransformer(this._input(t)))}domain(t,e){var n;if(!t)return(null!==(n=this._niceDomain)&&void 0!==n?n:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;const i=Array.from(t,c);return this._domain=i,this.rescale(e)}range(t,e){if(!t)return this._range.slice();const n=Array.from(t);return this._range=n,this.rescale(e)}rangeRound(t,e){const n=Array.from(t);return this._range=n,this._interpolate=E,this.rescale(e)}rescale(t){var e;if(t)return this;const n=null!==(e=this._niceDomain)&&void 0!==e?e:this._domain,i=n.length,r=this._range.length;let s=Math.min(i,r);if(i&&i<r&&this._forceAlign){const t=r-i+1,e=n[i-1],a=i>=2?(e-n[i-2])/t:0;for(let r=1;r<=t;r++)n[i-2+r]=e-a*(t-r);s=r}return this._autoClamp&&(this._clamp=T(n[0],n[s-1])),this._piecewise=s>2?Me:me,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(t,e,n){return arguments.length?(e?(this._autoClamp=!1,this._clamp=e):(this._autoClamp=!!t,this._clamp=t?void 0:ne),this.rescale(n)):this._clamp!==ne}interpolate(t,e){return arguments.length?(this._interpolate=t,this.rescale(e)):this._interpolate}ticks(t=10){return[]}tickData(t=10){const e=this.ticks(t);return(null!=e?e:[]).map(((t,e)=>({index:e,tick:t,value:(this.scale(t)-this._range[0])/(this._range[1]-this._range[0])})))}rangeFactor(t,e){return t?(super.rangeFactor(t),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(t,e){return n(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this._output=this._input=null,this)}rangeFactorEnd(t,e){return n(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this._output=this._input=null,this)}forceAlignDomainRange(t){return arguments.length?(this._forceAlign=t,this):this._forceAlign}}const De=Math.sqrt(50),Ne=Math.sqrt(10),Ce=Math.sqrt(2),Re=[1,2,5,10],Ue=(t,e,n)=>{let r=1,s=t;const a=Math.floor((e-1)/2),o=Math.abs(t);return t>=0&&t<=Number.MIN_VALUE?s=0:t<0&&t>=-Number.MIN_VALUE?s=-(e-1):!n&&o<1?r=Ae(o).step:(n||o>1)&&(s=Math.floor(t)-a*r),r>0?(t>0?s=Math.max(s,0):t<0&&(s=Math.min(s,-(e-1)*r)),function(t,e,n){i(e)||(e=t,t=0),i(n)||(n=1);let r=-1;const s=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(s);for(;++r<s;)a[r]=t+r*n;return a}(0,e).map((t=>s+t*r))):t>0?Le(0,-(e-1)/r,r):Le((e-1)/r,0,r)},Be=v(((t,e,n,i)=>{let r,s,a,o,h=-1;if(n=+n,(t=+t)===(e=+e))return[t];if(Math.abs(t-e)<=Number.MIN_VALUE&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),o=He(t,e,n).step,!isFinite(o))return[];if(o>0){let n=Math.round(t/o),i=Math.round(e/o);for(n*o<t&&++n,i*o>e&&--i,a=new Array(s=i-n+1);++h<s;)a[h]=(n+h)*o}else if(o<0&&(null==i?void 0:i.noDecimals)){o=1;const n=Math.ceil(t),i=Math.floor(e);if(!(n<=i))return[];for(a=new Array(s=i-n+1);++h<s;)a[h]=n+h}else{o=-o;let n=Math.round(t*o),i=Math.round(e*o);for(n/o<t&&++n,i/o>e&&--i,a=new Array(s=i-n+1);++h<s;)a[h]=(n+h)/o}return r&&a.reverse(),a})),Le=(t,e,n)=>{let i,r,s=-1;if(n>0){let a=Math.floor(t/n),o=Math.ceil(e/n);for((a+1)*n<t&&++a,(o-1)*n>e&&--o,r=new Array(i=o-a+1);++s<i;)r[s]=(a+s)*n}else{n=-n;let a=Math.floor(t*n),o=Math.ceil(e*n);for((a+1)/n<t&&++a,(o-1)/n>e&&--o,r=new Array(i=o-a+1);++s<i;)r[s]=(a+s)/n}return r},Oe=v(((t,e,n,i)=>{let r,s,a;if(n=+n,(t=+t)===(e=+e))return Ue(t,n,null==i?void 0:i.noDecimals);if(Math.abs(t-e)<=Number.MIN_VALUE&&n>0)return Ue(t,n,null==i?void 0:i.noDecimals);(r=e<t)&&(a=t,t=e,e=a);const o=He(t,e,n);let h=o.step;if(!isFinite(h))return[];if(h>0){let i=1;const{power:r,gap:a}=o,l=10===a?2*10**r:1*10**r;for(;i<=5&&(s=Le(t,e,h),s.length>n+1)&&n>2;)h+=l,i+=1;n>2&&s.length<n-1&&(s=((t,e,n)=>{let i;const r=t[0],s=t[t.length-1],a=e-t.length;if(s<=0){const e=[];for(i=a;i>=1;i--)e.push(r-i*n);return e.concat(t)}if(r>=0){for(i=1;i<=a;i++)t.push(s+i*n);return t}let o=[];const h=[];for(i=1;i<=a;i++)i%2==0?o=[r-Math.floor(i/2)*n].concat(o):h.push(s+Math.ceil(i/2)*n);return o.concat(t).concat(h)})(s,n,h))}else(null==i?void 0:i.noDecimals)&&h<0&&(h=1),s=Le(t,e,h);return r&&s.reverse(),s})),Ae=t=>{const e=Math.floor(Math.log(t)/Math.LN10),n=t/10**e;let i=Re[0];return n>=De?i=Re[3]:n>=Ne?i=Re[2]:n>=Ce&&(i=Re[1]),e>=0?{step:i*10**e,gap:i,power:e}:{step:-(10**-e)/i,gap:i,power:e}};function He(t,e,n){const i=(e-t)/Math.max(0,n);return Ae(i)}function Ie(t,e,n){let i;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if(n<=0||0===(i=function(t,e,n){const i=(e-t)/Math.max(1,n-1);return i}(t,e,n))||!isFinite(i))return[];const r=new Array(n);for(let e=0;e<n;e++)r[e]=t+e*i;return r}function Ve(t,e,n){let i,r,s=-1;if(n=+n,(r=(e=+e)<(t=+t))&&(i=t,t=e,e=i),!isFinite(n)||e-t<=n)return[t];const a=Math.floor((e-t)/n+1),o=new Array(a);for(;++s<a;)o[s]=t+s*n;return r&&o.reverse(),o}function Ye(t,e=10){let n,i,r=0,s=t.length-1,a=t[r],o=t[s],h=10;for(o<a&&(i=a,a=o,o=i,i=r,r=s,s=i);h-- >0;){if(i=He(a,o,e).step,i===n)return t[r]=a,t[s]=o,t;if(i>0)a=Math.floor(a/i)*i,o=Math.ceil(o/i)*i;else{if(!(i<0))break;a=Math.ceil(a*i)/i,o=Math.floor(o*i)/i}n=i}}function qe(t,e){const n=a(e.forceMin),i=a(e.forceMax);let r=null;const s=[];let o=null;const h=n&&i?t=>t>=e.forceMin&&t<=e.forceMax:n?t=>t>=e.forceMin:i?t=>t<=e.forceMax:null;return n?s[0]=e.forceMin:a(e.min)&&e.min<=Math.min(t[0],t[t.length-1])&&(s[0]=e.min),i?s[1]=e.forceMax:a(e.max)&&e.max>=Math.max(t[0],t[t.length-1])&&(s[1]=e.max),a(s[0])&&a(s[1])?(o=t.slice(),o[0]=s[0],o[o.length-1]=s[1]):r=a(s[0])||a(s[1])?a(s[0])?"max":"min":"all",{niceType:r,niceDomain:o,niceMinMax:s,domainValidator:h}}const $e=(t,e,n)=>Math.abs(e-t)<1?+n.toFixed(1):Math.round(+n),Ge=v(((t,e,n,i,r,s,a)=>{let o=t,h=e;const l=h<o;l&&([o,h]=[h,o]);let c,u,d=r(o),g=r(h),m=[];if(!(i%1)&&g-d<n){if(d=Math.floor(d),g=Math.ceil(g),o>0){for(;d<=g;++d)for(c=1;c<i;++c)if(u=d<0?c/s(-d):c*s(d),!(u<o)){if(u>h)break;m.push(u)}}else for(;d<=g;++d)for(c=i-1;c>=1;--c)if(u=d>0?c/s(-d):c*s(d),!(u<o)){if(u>h)break;m.push(u)}2*m.length<n&&(m=Oe(o,h,n))}else m=Oe(d,g,Math.min(g-d,n)).map(s);return m=m.filter((t=>0!==t)),(null==a?void 0:a.noDecimals)&&(m=Array.from(new Set(m.map((t=>Math.floor(t)))))),l?m.reverse():m})),je=v(((t,e,n,i,r,s)=>{const a=[],o={},h=r(t),l=r(e);let c=[];if(Number.isInteger(i))c=Oe(h,l,n);else{const t=(l-h)/(n-1);for(let e=0;e<n;e++)c.push(h+e*t)}return c.forEach((n=>{const r=s(n),h=Number.isInteger(i)?$e(t,e,r):$e(t,e,be(r)),l=$e(t,e,((t,e)=>{let n,i;return e[0]<e[1]?(n=e[0],i=e[1]):(n=e[1],i=e[0]),Math.min(Math.max(t,n),i)})(h,[t,e]));!o[l]&&!isNaN(l)&&c.length>1&&(o[l]=1,a.push(l))})),a})),Pe=v(((t,e,n,i,r)=>Ie(i(t),i(e),n).map((t=>be(r(t))))));class ze extends Ee{constructor(){super(...arguments),this.type=t.ScaleEnum.Linear}clone(){return(new ze).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}tickFormat(){return()=>{}}d3Ticks(t=10,e){const n=this.calculateVisibleDomain(this._range);return Be(n[0],n[n.length-1],t,e)}ticks(t=10,e){var n;if(i(this._rangeFactorStart)&&i(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&2===this._range.length||!this._niceType)return this.d3Ticks(t,e);const r=null!==(n=this._niceDomain)&&void 0!==n?n:this._domain,s=this._domain,a=r[0],o=r[r.length-1];let h=Oe(s[0],s[s.length-1],t,e);if(!h.length)return h;if(this._domainValidator)h=h.filter(this._domainValidator);else if((h[0]!==a||h[h.length-1]!==o)&&this._niceType){const t=r.slice();if("all"===this._niceType?(t[0]=h[0],t[t.length-1]=h[h.length-1],this._niceDomain=t,this.rescale()):"min"===this._niceType&&h[0]!==a?(t[0]=h[0],this._niceDomain=t,this.rescale()):"max"===this._niceType&&h[h.length-1]!==o&&(t[t.length-1]=h[h.length-1],this._niceDomain=t,this.rescale()),"all"!==this._niceType){const e=Math.min(t[0],t[t.length-1]),n=Math.max(t[0],t[t.length-1]);h=h.filter((t=>t>=e&&t<=n))}}return h}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return Ie(e[0],e[e.length-1],t)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return Ve(e[0],e[e.length-1],t)}nice(t=10,e){var n,i;const r=this._domain;let s=[];if(e){const t=qe(r,e);if(s=t.niceMinMax,this._domainValidator=t.domainValidator,this._niceType=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){const e=Ye(r.slice(),t);"min"===this._niceType?e[e.length-1]=null!==(n=s[1])&&void 0!==n?n:e[e.length-1]:"max"===this._niceType&&(e[0]=null!==(i=s[0])&&void 0!==i?i:e[0]),this._niceDomain=e,this.rescale()}return this}niceMin(t=10){this._niceType="min";const e=this._domain[this._domain.length-1],n=Ye(this.domain(),t);return n&&(n[n.length-1]=e,this._niceDomain=n,this.rescale()),this}niceMax(t=10){this._niceType="max";const e=this._domain[0],n=Ye(this._domain.slice(),t);return n&&(n[0]=e,this._niceDomain=n,this.rescale()),this}}function We(t){return e=>-t(-e)}function Qe(t=Number.EPSILON){return e=>Math.max(e,t)}class Ze extends Ee{constructor(){super(ce(10),le(10)),this.type=t.ScaleEnum.Log,this._limit=Qe(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return(new Ze).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(t){var e;if(t)return this;super.rescale();const n=ce(this._base),i=le(this._base);return(null!==(e=this._niceDomain)&&void 0!==e?e:this._domain)[0]<0?(this._logs=We(n),this._pows=We(i),this._limit=function(t=Number.EPSILON){return e=>Math.min(e,-t)}(),this.transformer=ae,this.untransformer=oe):(this._logs=n,this._pows=i,this._limit=Qe(),this.transformer=this._logs,this.untransformer=i),this}scale(t){var e;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise((null!==(e=this._niceDomain)&&void 0!==e?e:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const n=this._output(this.transformer(this._limit(this._clamp(t))));return this._fishEyeTransform?this._fishEyeTransform(n):n}base(t,e){return arguments.length?(this._base=t,this.rescale(e)):this._base}tickFormat(){return ne}d3Ticks(t=10,e){const n=this.domain(),i=this._limit(n[0]),r=this._limit(n[n.length-1]);return Ge(i,r,t,this._base,this.transformer,this.untransformer,e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return je(this._limit(e[0]),this._limit(e[e.length-1]),t,this._base,this.transformer,this.untransformer)}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return Pe(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return Pe(this._limit(e[0]),this._limit(e[e.length-1]),t,this.transformer,this.untransformer)}nice(t=10,e){var n,i;const r=this._domain;let s=[],a=null;if(e){const t=qe(r,e);if(s=t.niceMinMax,this._domainValidator=t.domainValidator,a=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else a="all";if(a){const t=we(r.slice(),{floor:t=>this._pows(Math.floor(this._logs(this._limit(t)))),ceil:t=>Math.abs(t)>=1?Math.ceil(t):this._pows(Math.ceil(this._logs(this._limit(t))))});return"min"===a?t[t.length-1]=null!==(n=s[1])&&void 0!==n?n:t[t.length-1]:"max"===a&&(t[0]=null!==(i=s[0])&&void 0!==i?i:t[0]),this._niceDomain=t,this.rescale(),this}return this}niceMin(){const t=this._domain[this._domain.length-1];this.nice();const e=this._domain.slice();return this._domain&&(e[e.length-1]=t,this._niceDomain=e,this.rescale()),this}niceMax(){const t=this._domain[0];this.nice();const e=this._domain.slice();return this._domain&&(e[0]=t,this._niceDomain=e,this.rescale()),this}}class Je extends ze{constructor(){super(),this.type=t.ScaleEnum.Pow,this._exponent=1}clone(){return(new Je).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).exponent(this._exponent)}rescale(t){return t||(1===this._exponent?(this.transformer=ne,this.untransformer=ne):.5===this._exponent?(this.transformer=re,this.untransformer=se):(this.transformer=ie(this._exponent),this.untransformer=ie(1/this._exponent)),super.rescale()),this}exponent(t,e){return arguments.length?(this._exponent=t,this.rescale(e)):this._exponent}}class Ke{constructor(){this.type=t.ScaleEnum.Quantile,this._range=[],this._domain=[],this._thresholds=[]}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}rescale(t){if(t)return this;let e=0;const n=Math.max(1,this._range.length);for(this._thresholds=new Array(n-1);++e<n;)this._thresholds[e-1]=u(this._domain,e/n);return this}scale(t){return o(t)?this._range[d(this._thresholds,t)]:this._unknown}invertExtent(t){const e=this._range.indexOf(t);return e<0?[NaN,NaN]:[e>0?this._thresholds[e-1]:this._domain[0],e<this._thresholds.length?this._thresholds[e]:this._domain[this._domain.length-1]]}quantiles(){return this._thresholds.slice()}domain(t,e){if(!t)return this._domain.slice();this._domain=[];for(const e of t)n(e)||Number.isNaN(+e)||this._domain.push(+e);return this._domain.sort(l),this.rescale(e)}range(t,e){if(!t)return this._range.slice();const n=Array.from(t);return h(this._range,n)?this:(this._range=n,this.rescale(e))}clone(){return(new Ke).domain(this._domain,!0).range(this._range).unknown(this._unknown)}}class Xe{constructor(){this.type=t.ScaleEnum.Quantile,this._range=[0,1],this._domain=[.5],this.x0=0,this.x1=1,this.n=1}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}rescale(t){if(t)return this;let e=-1;for(this._domain=new Array(this.n);++e<this.n;)this._domain[e]=((e+1)*this.x1-(e-this.n)*this.x0)/(this.n+1);return this}scale(t){return o(t)?this._range[d(this._domain,t,0,this.n)]:this._unknown}invertExtent(t){const e=this._range.indexOf(t);return e<0?[NaN,NaN]:e<1?[this.x0,this._domain[0]]:e>=this.n?[this._domain[this.n-1],this.x1]:[this._domain[e-1],this._domain[e]]}thresholds(){return this._domain.slice()}domain(t,e){if(!t)return[this.x0,this.x1];const n=Array.from(t);return this.x0=+n[0],this.x1=+n[1],this.rescale(e)}range(t,e){if(!t)return this._range.slice();const n=Array.from(t);return h(this._range,n)?this:(this.n=n.length-1,this._range=n,this.rescale(e))}clone(){return(new Xe).domain([this.x0,this.x1],!0).range(this._range).unknown(this._unknown)}ticks(t=10){const e=this.domain();return Oe(e[0],e[e.length-1],t)}forceTicks(t=10){const e=this.domain();return Ie(e[0],e[e.length-1],t)}stepTicks(t){const e=this.domain();return Ve(e[0],e[e.length-1],t)}nice(t=10){const e=Ye(this.domain(),t);return e?this.domain(e):this}niceMin(t=10){const e=this._domain[this._domain.length-1],n=Ye(this.domain(),t);return n&&(n[n.length-1]=e,this.domain(n)),this}niceMax(t=10){const e=this._domain[0],n=Ye(this.domain(),t);return n&&(n[0]=e,this.domain(n)),this}}class tn extends ze{constructor(){super(re,se),this.type=t.ScaleEnum.Sqrt}clone(){return(new tn).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}}class en extends ze{constructor(){super(ue(1),de(1)),this.type=t.ScaleEnum.Symlog,this._const=1}clone(){return(new en).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).constant(this._const)}constant(t,e){return arguments.length?(this._const=t,this.transformer=ue(t),this.untransformer=de(t),this.rescale(e)):this._const}d3Ticks(t=10,e){const n=this.domain(),i=n[0],r=n[n.length-1];return Ge(i,r,t,this._const,this.transformer,this.untransformer,e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return je(e[0],e[e.length-1],t,this._const,this.transformer,this.untransformer)}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return Pe(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return Pe(e[0],e[e.length-1],t,this.transformer,this.untransformer)}nice(t=10,e){var n,i;const r=this._domain;let s=[],a=null;if(e){const t=qe(r,e);if(s=t.niceMinMax,this._domainValidator=t.domainValidator,a=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else a="all";if(a){const t=we(r.slice(),{floor:t=>Math.floor(t),ceil:t=>Math.ceil(t)});return"min"===a?t[t.length-1]=null!==(n=s[1])&&void 0!==n?n:t[t.length-1]:"max"===a&&(t[0]=null!==(i=s[0])&&void 0!==i?i:t[0]),this._niceDomain=t,this.rescale(),this}return this}niceMin(){const t=this._domain[this._domain.length-1];this.nice();const e=this._domain.slice();return this._domain&&(e[e.length-1]=t,this._niceDomain=e,this.rescale()),this}niceMax(){const t=this._domain[0];this.nice();const e=this._domain.slice();return this._domain&&(e[0]=t,this._niceDomain=e,this.rescale()),this}}class nn{constructor(){this.type=t.ScaleEnum.Threshold,this._range=[0,1],this._domain=[.5],this.n=1}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}scale(t){return!n(t)&&o(+t)?this._range[d(this._domain,t,0,this.n)]:this._unknown}invertExtent(t){const e=this._range.indexOf(t);return[this._domain[e-1],this._domain[e]]}domain(t){return t?(this._domain=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._domain.slice()}range(t){return t?(this._range=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._range.slice()}clone(){return(new nn).domain(this._domain).range(this._range).unknown(this._unknown)}}const rn=[["second",1,K],["second",5,5e3],["second",10,1e4],["second",30,3e4],["minute",1,X],["minute",5,3e5],["minute",10,6e5],["minute",30,18e5],["hour",1,tt],["hour",3,3*tt],["hour",6,6*tt],["hour",12,12*tt],["day",1,et],["day",2,2*et],["day",7,7*et],["month",1,nt],["month",3,3*nt],["month",6,6*nt],["year",1,365*et]];function sn(t){return+N(t)}function an(t,e,n,i){const r=(+e-+t)/n,s=d(rn.map((t=>t[2])),r);if(s===rn.length){const r=Math.max(f(+t/it,+e/it,n),1),s=t=>(t[Z(i)](Math.floor(t[$(i)]()/r)*r),t[function(t){return t?"setUTCMonth":"setMonth"}(i)](0,1),t[function(t){return t?"setUTCHours":"setHours"}(i)](0,0,0,0),t),a=(t,e)=>(t[Z(i)](t[$(i)]()+e*r),t);return{floor:s,offset:a,ceil:Kt(s,a)}}if(0===s){const i=Math.max(f(+t,+e,n),1),r=t=>(t.setTime(Math.floor(+t/i)*i),t),s=(t,e)=>(t.setTime(+t+e*i),t);return{floor:r,offset:s,ceil:Kt(r,s)}}const[a,o]=rn[r/rn[s-1][2]<rn[s][2]/r?s-1:s],h=((t,e)=>"year"===t&&e?{floor:ht,offset:lt,count:ct,field:ut}:"month"===t&&e?{floor:ft,offset:pt,count:Mt,field:wt}:"day"===t&&e?{floor:St,offset:Ft,count:Tt,field:kt}:"hour"===t&&e?{floor:Rt,offset:Ut,count:Nt,field:Bt}:"minute"===t&&e?{floor:It,offset:Vt,count:At,field:Yt}:"second"===t&&e?{floor:Pt,offset:zt,count:Gt,field:Wt}:"year"===t?{floor:rt,offset:st,count:at,field:ot}:"month"===t?{floor:dt,offset:gt,count:mt,field:_t}:"day"===t?{floor:bt,offset:yt,count:vt,field:xt}:"hour"===t?{floor:Et,offset:Dt,count:Nt,field:Ct}:"minute"===t?{floor:Lt,offset:Ot,count:At,field:Ht}:"second"===t?{floor:qt,offset:$t,count:Gt,field:jt}:{floor:Qt,offset:Zt,count:Jt})(a,i);return Xt(o,h)}class on extends Ee{constructor(e=!1){super(),this.type=t.ScaleEnum.Time,this._domain=e?[Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]:[+new Date(2e3,0,1),+new Date(2e3,0,2)],this._isUtc=e}invert(t){return new Date(super.invert(t))}domain(t,e){if(!t)return this._domain.map(N);const n=Array.from(t,sn);return this._domain=n,this.rescale(e)}ticks(t){const e=this.domain();let i=e[0],r=e[e.length-1];const s=r<i;s&&([i,r]=[r,i]);let o=t;(a(t)||n(t))&&(o=an(i,r,n(t)?10:t,this._isUtc)),i=o.ceil(i);const h=[];let l=+i,c=0;for(;l<=+r&&c<100;)h.push(new Date(l)),l=+o.offset(new Date(l),1),c++;return s?h.reverse():h}tickFormat(t,e){return J(null==e?function(t,e){const n=N(t),i=n[G(e)]()+1,r=n[j(e)](),s=n[P(e)](),a=n[z(e)](),o=n[W(e)](),h=0===n[Q(e)](),l=h&&0===o,c=l&&0===a,u=c&&0===s,d=u&&1===r;return d&&1===i?"YYYY":d?"YYYY-MM":u?"YYYY-MM-DD":c?"HH":l?"HH:mm":h?"HH:mm:ss":"HH:mm:ss SSS"}(this._domain[0],this._isUtc):e,this._isUtc)}clone(){return new on(this._isUtc).domain(this.domain(),!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}nice(t){const e=this.domain();let i=t;return(a(t)||n(t))&&(i=an(e[0],e[e.length-1],n(t)?10:t,this._isUtc)),i&&this.domain(we(e,i)),this}utc(){return this._isUtc}}const hn=Symbol("implicit");class ln{constructor(){this.type=t.ScaleEnum.Identity}specified(t){var e;return t?(this._specified=Object.assign(null!==(e=this._specified)&&void 0!==e?e:{},t),this):Object.assign({},this._specified)}_getSpecifiedValue(t){if(this._specified)return this._specified[t]}clone(){return(new ln).unknown(this._unknown).domain(this._domain).specified(this._specified)}scale(t){const e=`${t}`,n=this._getSpecifiedValue(e);return void 0!==n?n:this._unknown!==hn&&this._domain&&!this._domain.includes(t)?this._unknown:t}invert(t){return t}domain(t){return t?(this._domain=t,this):this._domain?this._domain.slice():void 0}range(t){return t?this:this._domain?this._domain.slice():void 0}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}}t.BandScale=Fe,t.ContinuousScale=Ee,t.IdentityScale=ln,t.LinearScale=ze,t.LogScale=Ze,t.OrdinalScale=xe,t.PointScale=class extends Fe{constructor(e){super(!1),this.type=t.ScaleEnum.Point,this._padding=0,this.paddingInner(1,e),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}},t.PowScale=Je,t.QuantileScale=Ke,t.QuantizeScale=Xe,t.SqrtScale=tn,t.SymlogScale=en,t.ThresholdScale=nn,t.TimeScale=on,t.isContinuous=function(e){switch(e){case t.ScaleEnum.Linear:case t.ScaleEnum.Log:case t.ScaleEnum.Pow:case t.ScaleEnum.Sqrt:case t.ScaleEnum.Symlog:case t.ScaleEnum.Time:return!0;default:return!1}},t.isDiscrete=function(e){switch(e){case t.ScaleEnum.Ordinal:case t.ScaleEnum.Point:case t.ScaleEnum.Band:return!0;default:return!1}},t.isDiscretizing=function(e){switch(e){case t.ScaleEnum.Quantile:case t.ScaleEnum.Quantize:case t.ScaleEnum.Threshold:return!0;default:return!1}},t.isValidScaleType=function(t){return!!ee[t]},t.scaleWholeRangeSize=fe,t.supportRangeFactor=function(e){switch(e){case t.ScaleEnum.Linear:case t.ScaleEnum.Log:case t.ScaleEnum.Pow:case t.ScaleEnum.Sqrt:case t.ScaleEnum.Symlog:case t.ScaleEnum.Time:case t.ScaleEnum.Band:case t.ScaleEnum.Point:return!0;default:return!1}}}));
