{"version":3,"sources":["../src/component/tooltip/tooltip.ts"],"names":[],"mappings":"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","file":"tooltip.js","sourcesContent":["import type { IComponentOption } from '../interface';\n// eslint-disable-next-line no-duplicate-imports\nimport { ComponentTypeEnum } from '../interface/type';\nimport type { IModelLayoutOption, IModelRenderOption, IModelSpecInfo } from '../../model/interface';\nimport type { IRegion } from '../../region/interface';\nimport { BaseComponent } from '../base/base-component';\nimport type { BaseEventParams, EventCallback, EventQuery, EventType } from '../../event/interface';\nimport type { ITooltipHandler, IToolTipLineActual, TooltipActiveType } from '../../typings/tooltip';\nimport { DomTooltipHandler } from './handler/dom';\nimport { CanvasTooltipHandler } from './handler/canvas';\nimport type { Datum, IPoint, IShowTooltipOption } from '../../typings';\nimport { isMobileLikeMode, isTrueBrowser, isMiniAppLikeMode, domDocument } from '../../util/env';\nimport type {\n  ITooltip,\n  ITooltipActiveTypeAsKeys,\n  ITooltipSpec,\n  ITooltipTheme,\n  TooltipHandlerParams,\n  TotalMouseEventData\n} from './interface';\nimport { TooltipResult } from './interface/common';\nimport { TOOLTIP_EL_CLASS_NAME } from './handler/constants';\nimport { showTooltip } from './utils/show-tooltip';\nimport { getTooltipActualActiveType, isEmptyPos } from './utils/common';\nimport { isSameDimensionInfo } from '../../event/events/dimension/util/common';\nimport { ChartEvent, Event_Bubble_Level, Event_Source_Type } from '../../constant';\nimport type { DimensionTooltipInfo, MarkTooltipInfo, TooltipInfo } from './processor';\n// eslint-disable-next-line no-duplicate-imports\nimport { DimensionTooltipProcessor } from './processor/dimension-tooltip';\nimport { isDimensionInfo, isMarkInfo } from './processor/util';\nimport { MarkTooltipProcessor } from './processor/mark-tooltip';\nimport type { Maybe } from '@visactor/vutils';\n// eslint-disable-next-line no-duplicate-imports\nimport { hasParentElement, isString, cloneDeep, isArray, isValid, isNil } from '@visactor/vutils';\nimport { VChart } from '../../core/vchart';\nimport type { TooltipEventParams } from './interface/event';\nimport { Factory } from '../../core/factory';\nimport type { IGraphic } from '@visactor/vrender-core';\nimport { TooltipSpecTransformer } from './tooltip-transformer';\n\nexport type TooltipActualTitleContent = {\n  title?: IToolTipLineActual;\n  content?: IToolTipLineActual[];\n};\n\ntype EventHandlerList = {\n  eventType: EventType;\n  handler: any;\n}[];\n\nexport class Tooltip extends BaseComponent<any> implements ITooltip {\n  protected layoutZIndex: number = 1;\n  static type = ComponentTypeEnum.tooltip;\n  static readonly transformerConstructor = TooltipSpecTransformer;\n  type = ComponentTypeEnum.tooltip;\n  name: string = ComponentTypeEnum.tooltip;\n  readonly transformerConstructor = TooltipSpecTransformer;\n\n  static specKey = 'tooltip';\n  specKey = 'tooltip';\n\n  layoutType: 'none' = 'none';\n\n  protected declare _spec: ITooltipSpec;\n\n  static getSpecInfo(chartSpec: any): Maybe<IModelSpecInfo[]> {\n    const tooltipSpec = chartSpec[this.specKey];\n    if (!tooltipSpec) {\n      return null;\n    }\n    if (!isArray(tooltipSpec)) {\n      return [\n        {\n          spec: tooltipSpec,\n          specPath: [this.specKey],\n          type: ComponentTypeEnum.tooltip\n        }\n      ];\n    }\n    const specInfos: IModelSpecInfo[] = [];\n    tooltipSpec.forEach((s: any, i: number) => {\n      specInfos.push({\n        spec: s,\n        specIndex: i,\n        specPath: [this.specKey, i],\n        type: ComponentTypeEnum.tooltip\n      });\n    });\n    return specInfos;\n  }\n\n  tooltipHandler?: ITooltipHandler;\n\n  private _alwaysShow: boolean = false;\n\n  private _cacheInfo: TooltipInfo | undefined;\n\n  private _eventList: EventHandlerList = [];\n\n  protected _processor: ITooltipActiveTypeAsKeys<MarkTooltipProcessor, DimensionTooltipProcessor>;\n\n  protected _isTooltipShown: boolean = false;\n  /** 当前是否正在显示 tooltip */\n  isTooltipShown() {\n    return this._isTooltipShown;\n  }\n\n  changeRegions(regions: IRegion[]) {\n    /* do nothing */\n  }\n  protected _getNeedClearVRenderComponents(): IGraphic[] {\n    return [];\n  }\n  protected _registerEvent() {\n    /* do nothing */\n  }\n  protected _releaseEvent() {\n    /* do nothing */\n  }\n  onLayout(ctx: IModelLayoutOption) {\n    /* do nothing */\n  }\n  onLayoutEnd(ctx: IModelLayoutOption) {\n    /* do nothing */\n  }\n  onRender(ctx: IModelRenderOption) {\n    /* do nothing */\n  }\n\n  created() {\n    super.created();\n    this._regions = this._option.getAllRegions();\n    // event\n    this._initEvent();\n  }\n\n  release() {\n    super.release();\n\n    this._eventList.forEach(({ eventType, handler }) => {\n      this.event.off(eventType, handler);\n    });\n    this._eventList = [];\n    this.tooltipHandler?.release?.();\n    this._isTooltipShown = false;\n  }\n\n  beforeRelease() {\n    // 触发事件\n    this.event.emit(ChartEvent.tooltipHide, {\n      tooltip: this\n    } as unknown as TooltipEventParams);\n    this.event.emit(ChartEvent.tooltipRelease, {\n      tooltip: this\n    } as unknown as TooltipEventParams);\n  }\n\n  protected _initHandler() {\n    const renderMode = this._spec.renderMode ?? 'html';\n\n    const userTooltipHandler = this._option.globalInstance.getTooltipHandlerByUser();\n    if (userTooltipHandler) {\n      this.tooltipHandler = userTooltipHandler;\n    } else {\n      // 构造内部默认 handler\n      const Handler = renderMode === 'canvas' ? CanvasTooltipHandler : DomTooltipHandler;\n      const id = `${this._spec.className}-${this._option.globalInstance.id ?? 0}-${this._option.specIndex ?? 0}`;\n      this.tooltipHandler = new Handler(id, this);\n    }\n  }\n\n  protected _initProcessor() {\n    // 初始化 tooltip 类型\n    this._processor = {\n      mark: new MarkTooltipProcessor(this),\n      dimension: new DimensionTooltipProcessor(this)\n    };\n  }\n\n  protected _initEvent() {\n    if (this._option.disableTriggerEvent) {\n      return;\n    }\n    const trigger = this._spec.trigger ?? 'hover';\n    // TODO: triggerOff完整支持\n    // const triggerOff = this._spec.triggerOff ?? trigger;\n    const mode = this._option.mode;\n\n    if (trigger === 'hover') {\n      this._mountEvent('pointermove', { level: Event_Bubble_Level.chart }, this._handleMouseMove);\n      // 移动端的点按 + 滑动触发\n      if (isMobileLikeMode(mode) || isMiniAppLikeMode(mode)) {\n        this._mountEvent('pointerdown', { level: Event_Bubble_Level.chart }, this._handleMouseMove);\n        this._mountEvent('pointerup', { source: 'window' }, this._getMouseOutHandler(true));\n      }\n      this._mountEvent('pointerout', { source: 'canvas' }, this._getMouseOutHandler(false));\n    } else if (trigger === 'click') {\n      this._mountEvent('pointertap', { level: Event_Bubble_Level.chart }, this._handleMouseMove);\n      this._mountEvent('pointerup', { source: 'window' }, this._getMouseOutHandler(true));\n    }\n  }\n\n  protected _mountEvent = (eType: EventType, query: EventQuery, callback: EventCallback<any>) => {\n    this.event.on(eType, query, callback);\n    this._eventList.push({\n      eventType: eType,\n      handler: callback\n    });\n  };\n\n  protected _getMouseOutHandler = (needPointerDetection?: boolean) => (params: BaseEventParams) => {\n    if (this._alwaysShow) {\n      return;\n    }\n\n    if (!this._isTooltipShown && !this.tooltipHandler?.isTooltipShown?.()) {\n      return;\n    }\n\n    const browserEnv = isTrueBrowser(this._option.mode);\n    const { clientX, clientY } = params.event as MouseEvent;\n\n    // 当 enterable 为 true，同时鼠标移入 tooltip 时 pointerleave 事件也会触发，所以这里做一个判断\n    if (browserEnv && this._isPointerOnTooltip(params)) {\n      return;\n    }\n\n    // 判断鼠标是否在图表范围内\n    if (browserEnv && needPointerDetection && this._isPointerInChart({ x: clientX, y: clientY })) {\n      return;\n    }\n\n    this._handleChartMouseOut(params);\n  };\n\n  protected _handleChartMouseOut = (params: BaseEventParams) => {\n    if (this._alwaysShow) {\n      return;\n    }\n\n    if (this._spec.triggerOff !== 'none') {\n      this._hideTooltipByHandler({\n        ...params\n      });\n      this._cacheInfo = undefined;\n    }\n  };\n\n  protected _handleMouseMove = (params: BaseEventParams) => {\n    if (!this.tooltipHandler) {\n      this._initHandler();\n    }\n\n    if (!this._processor) {\n      this._initProcessor();\n    }\n\n    if (this._alwaysShow) {\n      return;\n    }\n    if (this._isPointerOnTooltip(params)) {\n      return;\n    }\n\n    /* 获取 tooltip 原始数据 */\n    const mouseEventData = this._getMouseEventData(params);\n    const {\n      tooltipInfo: { dimension: dimensionInfo },\n      ignore: { mark: ignoreMark, dimension: ignoreDimension }\n    } = mouseEventData;\n\n    let markTooltipSuccess: boolean = false;\n    let dimensionTooltipSuccess: boolean = false;\n\n    /* 显示常规tooltip */\n    markTooltipSuccess = this._showTooltipByMouseEvent('mark', mouseEventData, params);\n    if (!markTooltipSuccess) {\n      dimensionTooltipSuccess = this._showTooltipByMouseEvent('dimension', mouseEventData, params);\n    }\n\n    /* 如果不是常规情况，进行一些特殊情况tooltip处理 */\n    if (!markTooltipSuccess && !dimensionTooltipSuccess && !isEmptyPos(params)) {\n      // 用户手动配置ignore，则继续显示缓存tooltip\n      if (ignoreMark && isMarkInfo(this._cacheInfo)) {\n        markTooltipSuccess = this._showTooltipByMouseEvent('mark', mouseEventData, params, true);\n      } else if (ignoreDimension && isDimensionInfo(this._cacheInfo)) {\n        dimensionTooltipSuccess = this._showTooltipByMouseEvent('dimension', mouseEventData, params, true);\n      } else if (isValid(dimensionInfo)) {\n        // 用户没有手动配置ignore的话，默认显示dimension tooltip\n        dimensionTooltipSuccess = this._showTooltipByMouseEvent('dimension', mouseEventData, params);\n      }\n    }\n\n    /* 如果还是不应该显示tooltip，则隐藏上一次tooltip */\n    if (!markTooltipSuccess && (!dimensionTooltipSuccess || isNil(dimensionInfo))) {\n      this._handleChartMouseOut(params);\n    }\n  };\n\n  /**\n   * 通过鼠标事件触发 tooltip，返回是否成功\n   * @param activeType tooltip 类型\n   * @param mouseEventData tooltip 相关数据\n   * @param params 事件参数\n   * @param useCache 是否直接显示缓存 tooltip\n   * @returns 是否成功执行\n   */\n  protected _showTooltipByMouseEvent = (\n    activeType: TooltipActiveType,\n    mouseEventData: TotalMouseEventData,\n    params: BaseEventParams,\n    useCache?: boolean\n  ): boolean => {\n    const processor = this._processor[activeType];\n    // 判断是否应该触发 tooltip\n    if (\n      !processor.shouldHandleTooltip(params, {\n        tooltipInfo: mouseEventData.tooltipInfo[activeType],\n        ignore: mouseEventData.ignore[activeType]\n      })\n    ) {\n      return false;\n    }\n\n    let success: boolean;\n    if (useCache) {\n      // 直接显示缓存 tooltip\n      success = !processor.showTooltip(this._cacheInfo as any, params, true);\n    } else {\n      const tooltipInfo = mouseEventData.tooltipInfo[activeType];\n      const isSameAsCache = this._isSameAsCacheInfo(tooltipInfo);\n      success = !processor.showTooltip(tooltipInfo as any, params, isSameAsCache);\n      if (success) {\n        // 成功显示 tooltip，则更新缓存\n        this._cacheInfo = tooltipInfo;\n      }\n    }\n    if (success) {\n      this._isTooltipShown = true;\n    }\n    // 全局唯一 tooltip\n    const vchart = this._option.globalInstance;\n    if (success && VChart.globalConfig.uniqueTooltip) {\n      VChart.hideTooltip(vchart.id);\n    }\n    return success;\n  };\n\n  protected _getMouseEventData = (params: BaseEventParams): TotalMouseEventData => {\n    const result: TotalMouseEventData = {\n      tooltipInfo: {},\n      ignore: {}\n    };\n    Object.keys(this._processor).forEach(activeType => {\n      const { tooltipInfo, ignore } = this._processor[activeType].getMouseEventData(params);\n      result.tooltipInfo[activeType] = tooltipInfo;\n      result.ignore[activeType] = ignore;\n    });\n    return result;\n  };\n\n  protected _hideTooltipByHandler = (params: TooltipHandlerParams): TooltipResult => {\n    if (!this._isTooltipShown && !this.tooltipHandler?.isTooltipShown?.()) {\n      // 如果当前 tooltip 未显示，则提前退出\n      return TooltipResult.success;\n    }\n    this.event.emit(ChartEvent.tooltipHide, {\n      ...params,\n      source: Event_Source_Type.chart, // 统一 event 的来源\n      tooltip: this\n    });\n    if (this.tooltipHandler?.hideTooltip) {\n      const result = this.tooltipHandler.hideTooltip(params);\n      if (!result) {\n        this._isTooltipShown = false;\n      }\n      return result;\n    }\n    return TooltipResult.failed;\n  };\n\n  reInit(spec?: any) {\n    super.reInit(spec);\n\n    if (this.tooltipHandler) {\n      this.tooltipHandler.reInit?.();\n    } else {\n      this._initHandler();\n    }\n  }\n\n  setAttrFromSpec() {\n    super.setAttrFromSpec();\n    const userSpec = this._spec as ITooltipSpec;\n    this._spec = {\n      ...userSpec,\n      visible: isValid(userSpec.visible) ? userSpec.visible : true,\n      activeType: getTooltipActualActiveType(userSpec),\n      renderMode: 'html',\n      trigger: isValid(userSpec.trigger) ? userSpec.trigger : 'hover',\n      className: isValid(userSpec.className) ? userSpec.className : TOOLTIP_EL_CLASS_NAME,\n      enterable: isValid(userSpec.enterable) ? userSpec.enterable : false,\n      transitionDuration: isValid(userSpec.transitionDuration) ? userSpec.transitionDuration : 150\n    } as ITooltipSpec;\n    this._spec.triggerOff = isValid(userSpec.triggerOff) ? userSpec.triggerOff : this._spec.trigger;\n\n    if (isValid(userSpec.renderMode)) {\n      this._spec.renderMode = userSpec.renderMode;\n    } else if (isMiniAppLikeMode(this._option.mode)) {\n      // 小程序环境下，默认使用canvas渲染\n      this._spec.renderMode = 'canvas';\n    }\n\n    if (isValid(userSpec.mark)) {\n      this._spec.mark = {\n        ...cloneDeep(userSpec.mark),\n        activeType: 'mark'\n      };\n    }\n    if (isValid(userSpec.dimension)) {\n      this._spec.dimension = {\n        ...cloneDeep(userSpec.dimension),\n        activeType: 'dimension'\n      };\n    }\n\n    if (isValid(userSpec.parentElement)) {\n      if (isString(userSpec.parentElement)) {\n        this._spec.parentElement = globalThis?.document?.getElementById(userSpec.parentElement);\n      } else {\n        this._spec.parentElement = userSpec.parentElement;\n      }\n    } else if (isTrueBrowser(this._option.mode)) {\n      this._spec.parentElement = domDocument?.body;\n    }\n\n    if (isValid(userSpec.confine)) {\n      this._spec.confine = userSpec.confine;\n    } else {\n      this._spec.confine = this._spec.renderMode === 'canvas';\n    }\n  }\n\n  showTooltip(datum: Datum, options: IShowTooltipOption) {\n    if (!this.tooltipHandler) {\n      this._initHandler();\n    }\n\n    if (!this._processor) {\n      this._initProcessor();\n    }\n\n    if (!this.tooltipHandler?.showTooltip) {\n      return false;\n    }\n    const result = showTooltip(datum, options, this.tooltipHandler, this._option);\n    if (result !== 'none') {\n      this._alwaysShow = !!options?.alwaysShow;\n    }\n    return result;\n  }\n\n  /** 手动隐藏 tooltip，返回是否成功 */\n  hideTooltip(): boolean {\n    const params: TooltipHandlerParams = {\n      changePositionOnly: false,\n      item: undefined,\n      datum: undefined,\n      source: Event_Source_Type.chart\n    } as any;\n\n    this._alwaysShow = false;\n    return !this._hideTooltipByHandler(params);\n  }\n\n  private _isSameAsCacheInfo(nextInfo?: TooltipInfo): boolean {\n    if (nextInfo === this._cacheInfo) {\n      return true;\n    }\n    if (isNil(this._cacheInfo) || isNil(nextInfo)) {\n      return false;\n    }\n\n    if (isDimensionInfo(nextInfo)) {\n      if (isMarkInfo(this._cacheInfo)) {\n        return false;\n      }\n\n      const prevInfo = this._cacheInfo as DimensionTooltipInfo;\n      return prevInfo.length === nextInfo.length && nextInfo.every((info, i) => isSameDimensionInfo(info, prevInfo[i]));\n    }\n    if (isDimensionInfo(this._cacheInfo)) {\n      return false;\n    }\n\n    const prevInfo = this._cacheInfo as MarkTooltipInfo;\n    return (\n      nextInfo?.datum === prevInfo.datum && nextInfo?.mark === prevInfo.mark && nextInfo?.series === prevInfo.series\n    );\n  }\n\n  private _isPointerInChart(point: IPoint): boolean {\n    const globalInstance = this._option.globalInstance;\n    const chart = globalInstance.getChart();\n    if (!chart) {\n      return false;\n    }\n    const { x, y } = point;\n    const canvas = globalInstance.getCanvas();\n    const { x: chartX, y: chartY, width: chartWidth, height: chartHeight } = canvas.getBoundingClientRect();\n    // 鼠标仍在图表范围内，则不处理\n    if (x >= chartX && x <= chartX + chartWidth && y >= chartY && y <= chartY + chartHeight) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private _isPointerOnTooltip(params: BaseEventParams): boolean {\n    // TODO：后续支持 renderMode === 'canvas' 场景\n    if (this._spec.enterable && this._spec.renderMode === 'html') {\n      const { event } = params;\n      let newTarget: any;\n      if (isValid(event.nativeEvent)) {\n        // get native event object\n        const nativeEvent = event.nativeEvent as any;\n        newTarget = nativeEvent.relatedTarget;\n        // if in shadow DOM use composedPath to access target\n        // FIXME: shadow DOM 的 relatedTarget 的属性是？\n        if (nativeEvent.composedPath && nativeEvent.composedPath().length > 0) {\n          newTarget = nativeEvent.composedPath()[0];\n        }\n      } else {\n        newTarget = event.relatedTarget;\n      }\n      const container = this.tooltipHandler?.getTooltipContainer?.();\n      if (isValid(container) && isValid(newTarget) && hasParentElement(newTarget, container)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  getVisible() {\n    return this._spec.visible !== false;\n  }\n}\n\nexport const registerTooltip = () => {\n  Factory.registerComponent(Tooltip.type, Tooltip);\n};\n"]}