{"version":3,"sources":["../src/series/rose/animation.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,OAAO,EAAE,MAAM,oBAAoB,CAAC;AAS7C,MAAM,CAAC,MAAM,WAAW,GAAG,CAAC,MAA4B,EAAwB,EAAE;IAChF,MAAM,IAAI,GAAG,MAAM,CAAC,SAAS,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC;IAEnE,OAAO,MAAM,CAAC,SAAS,KAAK,OAAO;QACjC,CAAC,CAAC;YACE,IAAI,EAAE,MAAM,CAAC,SAAS,KAAK,OAAO,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,cAAc;SACpE;QACH,CAAC,CAAC;YACE,OAAO,EAAE;gBACP,WAAW,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,KAAY,EAAE,OAAY,EAAE,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,aAAa,CAAC,EAAE;gBACrG,WAAW,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,KAAY,EAAE,OAAY,EAAE,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,aAAa,CAAC,EAAE;aACtG;SACF,CAAC;AACR,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,aAAa,GAAyB;IACjD,IAAI,EAAE,QAAQ;CACf,CAAC;AAEF,MAAM,CAAC,MAAM,SAAS,GAAG,CAAC,MAA4B,EAAwB,EAAE;IAC9E,OAAO;QACL,IAAI,EAAE,MAAM,CAAC,SAAS,KAAK,OAAO,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,cAAc;KACpE,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAC,MAA4B,EAAwB,EAAE;IAC7E,OAAO;QACL,IAAI,EAAE,MAAM,CAAC,SAAS,KAAK,OAAO,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,eAAe;KACtE,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,aAAa,GAAG,CAAC,MAA4B,EAAwB,EAAE;IAClF,OAAO;QACL,IAAI,EAAE,MAAM,CAAC,SAAS,KAAK,OAAO,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,eAAe;KACtE,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,UAAU,mBAAmB,CACjC,MAA4B,EAC5B,MAAkC;IAElC,IAAI,MAAM,KAAK,KAAK,EAAE;QACpB,OAAO,EAAE,CAAC;KACX;IACD,QAAQ,MAAM,EAAE;QACd,KAAK,QAAQ;YACX,OAAO,aAAa,CAAC;QACvB,KAAK,WAAW;YACd,OAAO,WAAW,iCACb,MAAM,KACT,SAAS,EAAE,OAAO,IAClB,CAAC;QACL;YACE,OAAO,WAAW,iCACb,MAAM,KACT,SAAS,EAAE,QAAQ,IACnB,CAAC;KACN;AACH,CAAC;AAED,MAAM,CAAC,MAAM,qBAAqB,GAAG,GAAG,EAAE;IACxC,OAAO,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,MAA4B,EAAE,MAAwB,EAAE,EAAE;QAC3F,OAAO;YACL,MAAM,EAAE,mBAAmB,CAAC,MAAM,EAAE,MAAM,CAAC;YAC3C,KAAK,EAAE,SAAS,CAAC,MAAM,CAAC;YACxB,IAAI,EAAE,QAAQ,CAAC,MAAM,CAAC;YACtB,SAAS,EAAE,aAAa,CAAC,MAAM,CAAC;SACjC,CAAC;IACJ,CAAC,CAAC,CAAC;AACL,CAAC,CAAC","file":"animation.js","sourcesContent":["import type { IAnimationTypeConfig } from '@visactor/vgrammar-core';\nimport type { Datum } from '../../typings';\nimport { Factory } from '../../core/factory';\n\nexport interface IRoseAnimationParams {\n  innerRadius: () => number;\n  growField?: 'angle' | 'radius';\n}\n\nexport type RoseAppearPreset = 'growAngle' | 'growRadius' | 'fadeIn';\n\nexport const Appear_Grow = (params: IRoseAnimationParams): IAnimationTypeConfig => {\n  const from = params.growField === 'angle' ? 0 : params.innerRadius;\n  //TODO: 待 vgrammar 内置后替换\n  return params.growField === 'angle'\n    ? {\n        type: params.growField === 'angle' ? 'growAngleIn' : 'growRadiusIn'\n      }\n    : {\n        channel: {\n          innerRadius: { from, to: (datum: Datum, element: any) => element.getGraphicAttribute('innerRadius') },\n          outerRadius: { from, to: (datum: Datum, element: any) => element.getGraphicAttribute('outerRadius') }\n        }\n      };\n};\n\nexport const Appear_FadeIn: IAnimationTypeConfig = {\n  type: 'fadeIn'\n};\n\nexport const roseEnter = (params: IRoseAnimationParams): IAnimationTypeConfig => {\n  return {\n    type: params.growField === 'angle' ? 'growAngleIn' : 'growRadiusIn'\n  };\n};\n\nexport const roseExit = (params: IRoseAnimationParams): IAnimationTypeConfig => {\n  return {\n    type: params.growField === 'angle' ? 'growAngleOut' : 'growRadiusOut'\n  };\n};\n\nexport const roseDisappear = (params: IRoseAnimationParams): IAnimationTypeConfig => {\n  return {\n    type: params.growField === 'angle' ? 'growAngleOut' : 'growRadiusOut'\n  };\n};\n\nexport function rosePresetAnimation(\n  params: IRoseAnimationParams,\n  preset: RoseAppearPreset | boolean\n): IAnimationTypeConfig {\n  if (preset === false) {\n    return {};\n  }\n  switch (preset) {\n    case 'fadeIn':\n      return Appear_FadeIn;\n    case 'growAngle':\n      return Appear_Grow({\n        ...params,\n        growField: 'angle'\n      });\n    default:\n      return Appear_Grow({\n        ...params,\n        growField: 'radius'\n      });\n  }\n}\n\nexport const registerRoseAnimation = () => {\n  Factory.registerAnimation('rose', (params: IRoseAnimationParams, preset: RoseAppearPreset) => {\n    return {\n      appear: rosePresetAnimation(params, preset),\n      enter: roseEnter(params),\n      exit: roseExit(params),\n      disappear: roseDisappear(params)\n    };\n  });\n};\n"]}