"use strict";

Object.defineProperty(exports, "__esModule", {
    value: !0
}), exports.boundToRange = exports.bitmapTool = void 0;

const vutils_1 = require("@visactor/vutils"), bitmap_1 = require("./bitmap");

function bitmapTool(width, height, padding = 0) {
    const ratio = Math.max(1, Math.sqrt(width * height / 1e6)), w = ~~((width + 2 * padding + ratio) / ratio), h = ~~((height + 2 * padding + ratio) / ratio), scale = _ => ~~((_ + padding) / ratio);
    return scale.invert = _ => _ * ratio - padding, scale.bitmap = () => (0, bitmap_1.bitmap)(w, h), 
    scale.ratio = ratio, scale.padding = padding, scale.width = width, scale.height = height, 
    scale;
}

function boundToRange($, bound, clamp = !1) {
    if (clamp) {
        const {x1: x1, x2: x2, y1: y1, y2: y2} = bound, _x1 = (0, vutils_1.clamp)(x1, 0, $.width), _x2 = (0, 
        vutils_1.clamp)(x2, 0, $.width), _y1 = (0, vutils_1.clamp)(y1, 0, $.height), _y2 = (0, 
        vutils_1.clamp)(y2, 0, $.height);
        return {
            x1: $(_x1),
            x2: $(_x2),
            y1: $(_y1),
            y2: $(_y2)
        };
    }
    return {
        x1: $(bound.x1),
        x2: $(bound.x2),
        y1: $(bound.y1),
        y2: $(bound.y2)
    };
}

exports.bitmapTool = bitmapTool, exports.boundToRange = boundToRange;
//# sourceMappingURL=scaler.js.map
