{"version":3,"sources":["../src/graphic/graphic-service/symbol-contribution.ts"],"names":[],"mappings":";;;AACA,oCAAuC;AAEvC,+DAA6E;AAK7E,MAAa,0CACX,SAAQ,0DAAoC;IAG5C,YAAY,CACV,SAAkC,EAClC,WAA8C,EAC9C,UAAuB,EACvB,OAAkB;QAElB,MAAM,EACJ,WAAW,EACX,UAAU,GAAG,WAAW,CAAC,UAAU,EACnC,kBAAkB,GAAG,WAAW,CAAC,kBAAkB,EACpD,GAAG,SAAS,CAAC;QAEd,IAAI,WAAW,EAAE;YACf,MAAM,kBAAkB,GAAG,WAAW,CAAC,WAAW,CAAC;YACnD,MAAM,EAAE,QAAQ,GAAG,kBAAkB,CAAC,QAAQ,EAAE,SAAS,GAAG,kBAAkB,CAAC,SAAS,EAAE,GAAG,WAAW,CAAC;YAGzG,IAAA,mBAAW,EAAC,UAAU,EAAG,QAAmB,GAAG,CAAC,UAAU,GAAG,SAAS,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,kBAAkB,CAAC,CAAC;SACxG;QACD,OAAO,UAAU,CAAC;IACpB,CAAC;CACF;AAzBD,gGAyBC","file":"symbol-contribution.js","sourcesContent":["import type { IAABBBounds } from '@visactor/vutils';\nimport { boundStroke } from '../tools';\nimport type { IGraphic, ISymbolBoundsContribution, ISymbolGraphicAttribute } from '../../interface';\nimport { DefaultOuterBorderBoundsContribution } from './common-contribution';\n\n// export const SymbolBoundsContribution = Symbol.for('SymbolBoundsContribution');\n\n// @injectable()\nexport class DefaultSymbolOuterBorderBoundsContribution\n  extends DefaultOuterBorderBoundsContribution\n  implements ISymbolBoundsContribution\n{\n  updateBounds(\n    attribute: ISymbolGraphicAttribute,\n    symbolTheme: Required<ISymbolGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ): IAABBBounds {\n    const {\n      outerBorder,\n      shadowBlur = symbolTheme.shadowBlur,\n      strokeBoundsBuffer = symbolTheme.strokeBoundsBuffer\n    } = attribute;\n\n    if (outerBorder) {\n      const defaultOuterBorder = symbolTheme.outerBorder;\n      const { distance = defaultOuterBorder.distance, lineWidth = defaultOuterBorder.lineWidth } = outerBorder;\n\n      // Symbol的distance一定是number\n      boundStroke(aabbBounds, (distance as number) + (shadowBlur + lineWidth) / 2, true, strokeBoundsBuffer);\n    }\n    return aabbBounds;\n  }\n}\n"]}