{"version":3,"sources":["../src/series/range-column/range-column.ts"],"names":[],"mappings":"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","file":"range-column.js","sourcesContent":["import { BarSeries } from '../bar/bar';\nimport { MarkTypeEnum } from '../../mark/interface/type';\nimport type { SeriesMarkMap } from '../interface';\n// eslint-disable-next-line no-duplicate-imports\nimport { SeriesMarkNameEnum, SeriesTypeEnum } from '../interface/type';\nimport { Direction } from '../../typings/space';\nimport { type IRectMark, registerRectMark } from '../../mark/rect';\nimport { type ITextMark, registerTextMark } from '../../mark/text';\nimport { setRectLabelPos } from '../util/label-mark';\nimport { animationConfig, shouldMarkDoMorph, userAnimationConfig } from '../../animation/utils';\nimport { RangeColumnSeriesTooltipHelper } from './tooltip-helper';\nimport { registerFadeInOutAnimation } from '../../animation/config';\nimport type { Datum } from '../../typings';\nimport type { IRangeColumnSeriesSpec } from './interface';\n// eslint-disable-next-line no-duplicate-imports\nimport { PositionEnum } from './interface';\nimport type { IStateAnimateSpec } from '../../animation/spec';\nimport { registerRangeColumnAnimation, type RangeColumnAppearPreset } from './animation';\nimport { rangeColumnSeriesMark } from './constant';\nimport { Factory } from '../../core/factory';\nimport { getGroupAnimationParams } from '../util/utils';\nimport { RangeColumnSeriesSpecTransformer } from './range-column-transformer';\n\nexport const DefaultBandWidth = 6; // 默认的bandWidth，避免连续轴没有bandWidth\n\nexport class RangeColumnSeries<T extends IRangeColumnSeriesSpec = IRangeColumnSeriesSpec> extends BarSeries<any> {\n  static readonly type: string = SeriesTypeEnum.rangeColumn;\n  type = SeriesTypeEnum.rangeColumn;\n  protected _barMarkType: MarkTypeEnum = MarkTypeEnum.rect;\n  protected _barName: string = SeriesTypeEnum.bar;\n\n  protected declare _spec: T;\n\n  static readonly mark: SeriesMarkMap = rangeColumnSeriesMark;\n  static readonly transformerConstructor = RangeColumnSeriesSpecTransformer as any;\n  readonly transformerConstructor = RangeColumnSeriesSpecTransformer as any;\n\n  protected _stack: boolean = false;\n  private _minLabelMark?: ITextMark;\n  private _maxLabelMark?: ITextMark;\n  private _labelMark?: ITextMark;\n\n  initMark(): void {\n    this._initBarBackgroundMark();\n\n    const labelPosition = this._spec.label?.position;\n    this._barMark = this._createMark(RangeColumnSeries.mark.bar, {\n      morph: shouldMarkDoMorph(this._spec, RangeColumnSeries.mark.bar.name),\n      defaultMorphElementKey: this.getDimensionField()[0],\n      groupKey: this._seriesField,\n      isSeriesMark: true,\n      customShape: this._spec.bar?.customShape\n    }) as IRectMark;\n\n    if (this._spec.label?.visible !== false && labelPosition === PositionEnum.bothEnd) {\n      if (this._spec.label?.minLabel?.visible !== false) {\n        this._minLabelMark = this._createMark(RangeColumnSeries.mark.minLabel, {\n          markSpec: this._spec.label?.minLabel\n        }) as ITextMark;\n      }\n      if (this._spec.label?.maxLabel?.visible !== false) {\n        this._maxLabelMark = this._createMark(RangeColumnSeries.mark.maxLabel, {\n          markSpec: this._spec.label?.maxLabel\n        }) as ITextMark;\n      }\n    }\n  }\n\n  initMarkStyle(): void {\n    super.initMarkStyle();\n\n    const minLabelMark = this._minLabelMark;\n    const minLabelSpec = this._spec.label?.minLabel;\n    if (minLabelMark) {\n      this.setMarkStyle(minLabelMark, {\n        fill: minLabelSpec?.style?.fill ?? this.getColorAttribute(),\n        text: (datum: Datum) => {\n          const min =\n            this._spec.direction === Direction.horizontal ? datum[this._spec.xField[0]] : datum[this._spec.yField[0]];\n          if (minLabelSpec?.formatMethod) {\n            return minLabelSpec.formatMethod(min, datum);\n          }\n          return min;\n        }\n      });\n      const position = minLabelSpec?.position ?? 'end';\n      const offset = minLabelSpec?.offset ?? (this._direction === 'vertical' ? -20 : -25);\n      setRectLabelPos(\n        this,\n        minLabelMark,\n        position,\n        offset,\n        (datum: Datum) => this._barMark.getAttribute('x', datum) as number,\n        (datum: Datum) => {\n          return this._direction === 'vertical'\n            ? (this._barMark.getAttribute('x', datum) as number) +\n                (this._barMark.getAttribute('width', datum) as number)\n            : (this._barMark.getAttribute('x1', datum) as number);\n        },\n        (datum: Datum) => this._barMark.getAttribute('y', datum) as number,\n        (datum: Datum) => {\n          return this._direction === 'vertical'\n            ? (this._barMark.getAttribute('y1', datum) as number)\n            : (this._barMark.getAttribute('y', datum) as number) +\n                (this._barMark.getAttribute('height', datum) as number);\n        },\n        () => this._direction\n      );\n    }\n\n    const maxLabelMark = this._maxLabelMark;\n    const maxLabelSpec = this._spec.label?.maxLabel;\n    if (maxLabelMark) {\n      this.setMarkStyle(maxLabelMark, {\n        fill: maxLabelSpec?.style?.fill ?? this.getColorAttribute(),\n        text: (datum: Datum) => {\n          const max =\n            this._spec.direction === Direction.horizontal ? datum[this._spec.xField[1]] : datum[this._spec.yField[1]];\n          if (maxLabelSpec?.formatMethod) {\n            return maxLabelSpec.formatMethod(max, datum);\n          }\n          return max;\n        }\n      });\n      const position = maxLabelSpec?.position ?? 'start';\n      const offset = maxLabelSpec?.offset ?? (this._direction === 'vertical' ? -20 : -25);\n      setRectLabelPos(\n        this,\n        maxLabelMark,\n        position,\n        offset,\n        (datum: Datum) => this._barMark.getAttribute('x', datum) as number,\n        (datum: Datum) => {\n          return this._direction === 'vertical'\n            ? (this._barMark.getAttribute('x', datum) as number) +\n                (this._barMark.getAttribute('width', datum) as number)\n            : (this._barMark.getAttribute('x1', datum) as number);\n        },\n        (datum: Datum) => this._barMark.getAttribute('y', datum) as number,\n        (datum: Datum) => {\n          return this._direction === 'vertical'\n            ? (this._barMark.getAttribute('y1', datum) as number)\n            : (this._barMark.getAttribute('y', datum) as number) +\n                (this._barMark.getAttribute('height', datum) as number);\n        },\n        () => this._direction\n      );\n    }\n  }\n\n  initLabelMarkStyle(labelMark: ITextMark): void {\n    if (!labelMark) {\n      return;\n    }\n    this.setMarkStyle(labelMark, {\n      text: (datum: Datum) => {\n        let min;\n        let max;\n        if (this._spec.direction === Direction.horizontal) {\n          min = datum[this._spec.xField[0]];\n          max = datum[this._spec.xField[1]];\n        } else {\n          min = datum[this._spec.yField[0]];\n          max = datum[this._spec.yField[1]];\n        }\n        return min + '-' + max;\n      },\n      z: this._fieldZ ? this.dataToPositionZ.bind(this) : null\n    });\n    this._labelMark = labelMark;\n  }\n\n  protected _dataToPosX(datum: Datum) {\n    return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(datum, this._spec.xField[0]), {\n      bandPosition: this._bandPosition\n    });\n  }\n\n  protected _dataToPosX1(datum: Datum) {\n    return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(datum, this._spec.xField[1]), {\n      bandPosition: this._bandPosition\n    });\n  }\n\n  protected _dataToPosY(datum: Datum) {\n    return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(datum, this._spec.yField[0]), {\n      bandPosition: this._bandPosition\n    });\n  }\n\n  protected _dataToPosY1(datum: Datum) {\n    return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(datum, this._spec.yField[1]), {\n      bandPosition: this._bandPosition\n    });\n  }\n\n  initAnimation() {\n    const animationParams = getGroupAnimationParams(this);\n\n    const appearPreset = (this._spec?.animationAppear as IStateAnimateSpec<RangeColumnAppearPreset>)?.preset;\n    this._barMark.setAnimationConfig(\n      animationConfig(\n        Factory.getAnimationInKey('rangeColumn')?.({ direction: this.direction }, appearPreset),\n        userAnimationConfig(SeriesMarkNameEnum.bar, this._spec, this._markAttributeContext),\n        animationParams\n      )\n    );\n\n    if (this._minLabelMark) {\n      this._minLabelMark.setAnimationConfig(\n        animationConfig(\n          Factory.getAnimationInKey('fadeInOut')?.(),\n          userAnimationConfig(SeriesMarkNameEnum.label, this._spec, this._markAttributeContext),\n          animationParams\n        )\n      );\n    }\n\n    if (this._maxLabelMark) {\n      this._maxLabelMark.setAnimationConfig(\n        animationConfig(\n          Factory.getAnimationInKey('fadeInOut')?.(),\n          userAnimationConfig(SeriesMarkNameEnum.label, this._spec, this._markAttributeContext),\n          animationParams\n        )\n      );\n    }\n  }\n\n  protected initTooltip() {\n    this._tooltipHelper = new RangeColumnSeriesTooltipHelper(this);\n    this._barMark && this._tooltipHelper.activeTriggerSet.mark.add(this._barMark);\n\n    this._minLabelMark && this._tooltipHelper.ignoreTriggerSet.mark.add(this._minLabelMark);\n    this._maxLabelMark && this._tooltipHelper.ignoreTriggerSet.mark.add(this._maxLabelMark);\n    this._labelMark && this._tooltipHelper.ignoreTriggerSet.mark.add(this._labelMark);\n  }\n}\n\nexport const registerRangeColumnSeries = () => {\n  registerRectMark();\n  registerTextMark();\n  registerRangeColumnAnimation();\n  registerFadeInOutAnimation();\n  Factory.registerSeries(RangeColumnSeries.type, RangeColumnSeries);\n};\n"]}