{"version":3,"sources":["../src/component/label/interface.ts"],"names":[],"mappings":"","file":"interface.js","sourcesContent":["import type { BaseLabelAttrs } from '@visactor/vrender-components';\nimport type { ConvertToMarkStyleSpec, Datum, ITextMarkSpec } from '../../typings';\nimport type { IComponentSpec } from '../base/interface';\nimport type { IRichTextCharacter } from '@visactor/vrender-core';\nimport type { ILabelMark } from '../../mark/label';\nimport type { ISeries } from '../../series';\n\nexport interface ILabelFormatMethodContext {\n  series?: ISeries;\n}\n\nexport interface ILabelSpec extends IComponentSpec {\n  /** 默认不显示标签 */\n  visible?: boolean;\n  /** 是否支持交互。@default false */\n  interactive?: boolean;\n  // 文本类型：text, rich, html (区分于图元类型)\n  textType?: string;\n  /** 格式化函数\n   *  支持返回值为富文本内容, 如textConfig, html\n   */\n  formatMethod?: (\n    text: string | string[],\n    datum?: Datum,\n    ctx?: ILabelFormatMethodContext\n  ) => string | string[] | IRichTextCharacter[];\n  /** 字符串模版\n   *  用{}包裹变量名的字符串模版, 变量名取自数据属性值\n   *  在饼图中支持配置百分比, {_percent_}\n   *  eg: 'type={type},value={value},percent={_percent_}'\n   *  @since 1.7.0\n   */\n  formatter?: string;\n  /** 标签与其对应数据图元的间距 */\n  offset?: number;\n  /** 标签位置 */\n  position?: string;\n  /** 标签样式配置 */\n  style?: ConvertToMarkStyleSpec<ITextMarkSpec>;\n  /** 交互样式配置 */\n  state?: LabelStateStyle<Partial<ITextMarkSpec>>;\n  /** 标签防重叠配置 */\n  overlap?: BaseLabelAttrs['overlap'];\n  /** 标签智能反色配置 */\n  smartInvert?: BaseLabelAttrs['smartInvert'];\n  /** 动画配置 */\n  animation?: BaseLabelAttrs['animation'];\n  /** 自定义标签数据筛选和排序\n   * @since 1.3.0\n   */\n  dataFilter?: BaseLabelAttrs['dataFilter'];\n  /** 自定义标签布局函数。\n   * @description 当配置了 customLayoutFunc 后，默认布局和防重叠逻辑将不再生效。（overlap/position/offset不生效）\n   * @since 1.3.0\n   */\n  customLayoutFunc?: BaseLabelAttrs['customLayoutFunc'];\n  /** 自定义标签躲避函数\n   * @description 当配置了 customOverlapFunc 后，会根据 position 和 offset 进行初始布局。配置的防重叠逻辑(overlap)不生效。\n   * @since 1.3.0\n   */\n  customOverlapFunc?: BaseLabelAttrs['customOverlapFunc'];\n  /** 标签布局 */\n  labelLayout?: 'series' | 'region';\n  /** 中心点偏移距离 */\n  centerOffset?: number;\n  /** 是否支持3D */\n  support3d?: boolean;\n}\n\ntype LabelStateStyle<T> = {\n  hover?: T;\n  hover_reverse?: T;\n  selected?: T;\n  selected_reverse?: T;\n};\n\nexport type ITotalLabelSpec = Pick<\n  ILabelSpec,\n  'visible' | 'formatMethod' | 'interactive' | 'offset' | 'style' | 'state'\n>;\n\nexport interface ITotalLabelTheme\n  extends Pick<ILabelSpec, 'visible' | 'interactive' | 'offset' | 'overlap' | 'smartInvert' | 'animation'> {\n  style?: ITextMarkSpec;\n}\n\n// 内部处理转换后的标签配置\nexport type TransformedLabelSpec = ILabelSpec & {\n  getStyleHandler: (series: ISeries) => (mark?: ILabelMark) => void;\n};\n"]}