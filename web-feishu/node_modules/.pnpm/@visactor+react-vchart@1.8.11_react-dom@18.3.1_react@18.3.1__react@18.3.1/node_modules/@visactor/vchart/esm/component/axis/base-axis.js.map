{"version":3,"sources":["../src/component/axis/base-axis.ts"],"names":[],"mappings":"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","file":"base-axis.js","sourcesContent":["import { ticks } from '@visactor/vutils-extension';\n// eslint-disable-next-line no-duplicate-imports\nimport type { ITickDataOpt } from '@visactor/vutils-extension';\nimport type { IBaseScale } from '@visactor/vscale';\nimport type { IGroup, IGraphic } from '@visactor/vrender-core';\n// eslint-disable-next-line no-duplicate-imports\nimport type { AxisItem } from '@visactor/vrender-components';\nimport type {\n  IOrientType,\n  IPolarOrientType,\n  Datum,\n  StringOrNumber,\n  IGroup as ISeriesGroup,\n  CoordinateType\n} from '../../typings';\nimport { BaseComponent } from '../base/base-component';\nimport type { IPolarAxisCommonTheme } from './polar/interface';\nimport type { ICartesianAxisCommonTheme } from './cartesian/interface';\nimport type { CompilableData } from '../../compile/data';\nimport type { IAxis, ICommonAxisSpec, ITick } from './interface';\nimport type { IComponentOption } from '../interface';\nimport { array, get, isArray, isBoolean, isFunction, isNil, isValid, maxInArray } from '@visactor/vutils';\nimport { eachSeries, getSeries } from '../../util/model';\nimport { mergeSpec } from '../../util/spec/merge-spec';\nimport type { ISeries } from '../../series/interface';\nimport { ChartEvent, LayoutZIndex } from '../../constant';\nimport { animationConfig } from '../../animation/utils';\n// eslint-disable-next-line no-duplicate-imports\nimport { degreeToRadian, pickWithout, type LooseFunction, isEqual } from '@visactor/vutils';\nimport { DEFAULT_TITLE_STYLE, transformAxisLineStyle } from './util';\nimport { transformAxisLabelStateStyle, transformStateStyle, transformToGraphic } from '../../util/style';\nimport { DataView, type ITransformOptions } from '@visactor/vdataset';\nimport {\n  GridEnum,\n  registerAxis as registerVGrammarAxis,\n  registerGrid as registerVGrammarGrid\n} from '@visactor/vgrammar-core';\nimport { ComponentMark, registerComponentMark, type IComponentMark } from '../../mark/component';\nimport { Factory } from '../../core/factory';\n// eslint-disable-next-line no-duplicate-imports\nimport { GroupFadeIn, GroupTransition } from '@visactor/vrender-components';\n// eslint-disable-next-line no-duplicate-imports\nimport { GroupFadeOut } from '@visactor/vrender-core';\nimport { scaleParser } from '../../data/parser/scale';\nimport { registerDataSetInstanceParser, registerDataSetInstanceTransform } from '../../data/register';\n\nexport abstract class AxisComponent<T extends ICommonAxisSpec & Record<string, any> = any> // FIXME: 补充公共类型，去掉 Record<string, any>\n  extends BaseComponent<T>\n  implements IAxis\n{\n  static specKey = 'axes';\n  specKey = 'axes';\n\n  protected _orient: IPolarOrientType | IOrientType;\n  getOrient() {\n    return this._orient;\n  }\n\n  protected _scale!: IBaseScale;\n  getScale() {\n    return this._scale;\n  }\n\n  protected _scales: IBaseScale[] = [];\n  getScales() {\n    return this._scales;\n  }\n\n  protected _tickData!: CompilableData;\n  getTickData() {\n    return this._tickData;\n  }\n\n  // 与系列的关联关系\n  // 优先级：id > index\n  // 最终结果：series & region取交集\n  protected _seriesUserId?: StringOrNumber[];\n  protected _seriesIndex?: number[];\n  protected _regionUserId?: StringOrNumber[];\n  protected _regionIndex?: number[];\n\n  /**\n   * if axis will be shown\n   */\n  protected _visible: boolean = true;\n  get visible() {\n    return this._visible;\n  }\n\n  /** 轴是否产生反转的真实值，在横向图表的竖轴上可能和用户在 spec 上配的值相反 */\n  protected _inverse: boolean;\n  getInverse() {\n    return this._inverse;\n  }\n\n  protected _tick: ITick | undefined = undefined;\n  protected abstract computeDomain(data: { min: number; max: number; values: any[] }[]): StringOrNumber[];\n  abstract valueToPosition(value: any): number;\n  protected abstract axisHelper(): any;\n  protected abstract getSeriesStatisticsField(s: ISeries): string[];\n  protected abstract updateSeriesScale(): void;\n  protected abstract collectData(depth: number, rawData?: boolean): { min: number; max: number; values: any[] }[];\n  protected abstract _initData(): void;\n  abstract transformScaleDomain(): void;\n\n  protected _dataFieldText: string;\n  protected _axisMark: IComponentMark;\n  protected _gridMark: IComponentMark;\n\n  constructor(spec: T, options: IComponentOption) {\n    super(spec, options);\n    this._visible = spec.visible ?? true;\n  }\n\n  protected _getNeedClearVRenderComponents(): IGraphic[] {\n    return [];\n  }\n\n  getVRenderComponents() {\n    return array(this._axisMark?.getProduct()?.getGroupGraphicItem());\n  }\n\n  created() {\n    super.created();\n    //series and regions\n    this.setSeriesAndRegionsFromSpec();\n    // event\n    this.initEvent();\n    // scales\n    this.initScales();\n    this.updateSeriesScale();\n    // data，当且仅当轴展示的时候处理\n    this.getVisible() && this._initData();\n\n    if (this._visible) {\n      // 创建语法元素\n      const axisMark = this._createMark(\n        { type: 'component', name: `axis-${this.getOrient()}` },\n        {\n          componentType: this.getOrient() === 'angle' ? 'circleAxis' : 'axis',\n          mode: this._spec.mode,\n          noSeparateStyle: true,\n          skipTheme: true // skip theme of vgrammar to avoid merge\n        }\n      );\n      this._axisMark = axisMark;\n      axisMark.setZIndex(this.layoutZIndex);\n      if (isValid(this._spec.id)) {\n        axisMark.setUserId(this._spec.id);\n      }\n      this._marks.addMark(axisMark);\n\n      if (this._spec.grid?.visible) {\n        const gridMark = this._createMark(\n          { type: 'component', name: `axis-${this.getOrient()}-grid` },\n          {\n            componentType: this.getOrient() === 'angle' ? GridEnum.circleAxisGrid : GridEnum.lineAxisGrid,\n            mode: this._spec.mode,\n            noSeparateStyle: true,\n            skipTheme: true\n          }\n        );\n        gridMark.setZIndex(this._spec.grid?.style?.zIndex ?? this._spec.grid?.zIndex ?? LayoutZIndex.Axis_Grid);\n        this._marks.addMark(gridMark);\n        this._gridMark = gridMark;\n      }\n\n      // interactive\n      if (isBoolean(this._spec.interactive)) {\n        this._marks.forEach(m => m.setInteractive(this._spec.interactive));\n      }\n\n      // Tip: 支持 spec.animationAppear.axis，并且坐标轴默认关闭动画\n      if (\n        this._option.animation !== false &&\n        get(this._option.getChart().getSpec(), 'animation') !== false &&\n        this._spec.animation === true\n      ) {\n        const axisAnimateConfig = animationConfig(Factory.getAnimationInKey('axis')?.(), {\n          appear:\n            this._spec.animationAppear ??\n            get(this._option.getChart().getSpec(), 'animationAppear.axis') ??\n            get(this._option.getChart().getSpec(), 'animationAppear'),\n          disappear:\n            this._spec.animationDisappear ??\n            get(this._option.getChart().getSpec(), 'animationDisappear.axis') ??\n            get(this._option.getChart().getSpec(), 'animationDisappear'),\n          enter:\n            this._spec.animationEnter ??\n            get(this._option.getChart().getSpec(), 'animationEnter.axis') ??\n            get(this._option.getChart().getSpec(), 'animationEnter'),\n          exit:\n            this._spec.animationExit ??\n            get(this._option.getChart().getSpec(), 'animationExit.axis') ??\n            get(this._option.getChart().getSpec(), 'animationExit'),\n          update:\n            this._spec.animationUpdate ??\n            get(this._option.getChart().getSpec(), 'animationUpdate.axis') ??\n            get(this._option.getChart().getSpec(), 'animationUpdate')\n        });\n        // 因为坐标轴的更新动画中处理了 enter，所以需要将 enter 的参数传入\n        if (axisAnimateConfig.enter) {\n          axisAnimateConfig.update[0].customParameters = {\n            enter: axisAnimateConfig.enter[0]\n          };\n        }\n        this._marks.forEach(m => m.setAnimationConfig(axisAnimateConfig));\n      }\n    }\n  }\n\n  protected isSeriesDataEnable() {\n    let enable = true;\n    eachSeries(\n      this._regions,\n      s => {\n        if (isArray(s.getViewDataStatistics()?.latestData)) {\n          enable = false;\n        }\n      },\n      {\n        userId: this._seriesUserId,\n        specIndex: this._seriesIndex\n      }\n    );\n    return enable;\n  }\n\n  protected setSeriesAndRegionsFromSpec() {\n    const { seriesId, seriesIndex, regionId, regionIndex } = this._spec;\n    isValid(seriesId) && (this._seriesUserId = array(seriesId));\n    isValid(regionId) && (this._regionUserId = array(regionId));\n    isValid(seriesIndex) && (this._seriesIndex = array(seriesIndex));\n    isValid(regionIndex) && (this._regionIndex = array(regionIndex));\n    this._regions = this._option.getRegionsInUserIdOrIndex(this._regionUserId as string[], this._regionIndex);\n    // _regions 被更新了，layoutBindRegionID 也要更新\n    this.layout.layoutBindRegionID = this._regions.map(x => x.id);\n  }\n\n  getBindSeriesFilter() {\n    return {\n      userId: this._seriesUserId,\n      specIndex: this._seriesIndex\n    };\n  }\n\n  protected initEvent() {\n    this.event.on(\n      ChartEvent.scaleUpdate,\n      { filter: ({ model }) => model?.id === this.id },\n      this.effect.scaleUpdate.bind(this)\n    );\n    const viewStatistics = getSeries(this._regions, {\n      userId: this._seriesUserId,\n      specIndex: this._seriesIndex\n    })\n      .map(s => s.getViewDataStatistics())\n      .filter(v => !!v);\n\n    if (viewStatistics.length > 1) {\n      this._option.dataSet.multipleDataViewAddListener(viewStatistics, 'change', () => {\n        this.updateScaleDomain();\n      });\n    } else if (viewStatistics.length === 1) {\n      viewStatistics[0].target.addListener('change', () => {\n        this.updateScaleDomain();\n      });\n    }\n\n    eachSeries(\n      this._regions,\n      s => {\n        s.event.on(ChartEvent.rawDataUpdate, { filter: ({ model }) => model?.id === s.id }, () => {\n          // 只清除，不更新，在需要时，更新一次。避免多系列下多次更新\n          this._clearRawDomain();\n        });\n      },\n      {\n        userId: this._seriesUserId,\n        specIndex: this._seriesIndex\n      }\n    );\n  }\n\n  protected updateScaleDomain() {\n    // 留给各个类型的 axis 来 override\n  }\n\n  protected _clearRawDomain() {\n    // 留给各个类型的 axis 来 override\n  }\n\n  protected computeData(updateType?: 'domain' | 'range' | 'force'): void {\n    if (this._tickData && (updateType === 'force' || !isEqual(this._scale.range(), [0, 1]))) {\n      this._tickData.getDataView().reRunAllTransform();\n      this._tickData.updateData();\n    }\n  }\n\n  protected initScales() {\n    this._scales = [this._scale];\n    const groups: ISeriesGroup[] = [];\n    eachSeries(\n      this._regions,\n      s => {\n        const g = s.getGroups();\n        g && groups.push(g);\n      },\n      {\n        userId: this._seriesUserId,\n        specIndex: this._seriesIndex\n      }\n    );\n    if (groups.length !== 0) {\n      const depth = maxInArray(groups.map(g => g.fields.length));\n      for (let i = 1; i < depth; i++) {\n        const scale = this._scale.clone();\n        this._scales.push(scale);\n      }\n    }\n    // this.updateScaleDomain();\n  }\n\n  /** Update API **/\n  _compareSpec(spec: T, prevSpec: T) {\n    const result = super._compareSpec(spec, prevSpec);\n    result.reRender = true;\n    if (prevSpec?.type !== spec?.type) {\n      result.reMake = true;\n      return result;\n    }\n    return result;\n  }\n\n  protected getLabelFormatMethod() {\n    return this._spec.label.formatMethod\n      ? (value: any, datum: any, index: number) => this._spec.label.formatMethod(datum.rawValue, datum)\n      : null;\n  }\n\n  protected getLabelItems(length: number) {\n    return isArray(this._tickData.getLatestData())\n      ? [\n          this._tickData\n            .getLatestData()\n            .map((obj: Datum) => {\n              return {\n                id: obj.value,\n                label: obj.value,\n                value: length === 0 ? 0 : this.dataToPosition([obj.value]) / length,\n                rawValue: obj.value\n              };\n            })\n            .filter((entry: AxisItem) => entry.value >= 0 && entry.value <= 1)\n        ]\n      : [];\n  }\n\n  protected _delegateAxisContainerEvent(component: IGroup) {\n    component.addEventListener('*', ((event: any, type: string) =>\n      this._delegateEvent(component as unknown as IGraphic, event, type)) as LooseFunction);\n  }\n\n  protected _getAxisAttributes() {\n    const spec = this._spec;\n    let titleAngle = spec.title.angle;\n    let titleTextStyle;\n    if (spec.orient === 'left' || spec.orient === 'right') {\n      // 处理纵轴的标题样式\n      if (spec.title?.autoRotate && isNil(spec.title.angle)) {\n        titleAngle = spec.orient === 'left' ? -90 : 90;\n        titleTextStyle = DEFAULT_TITLE_STYLE[spec.orient];\n      }\n    }\n\n    const labelSpec = pickWithout(spec.label, ['style', 'formatMethod', 'state']);\n    const backgroundSpec = spec.background ?? {};\n    const titleBackgroundSpec = spec.title.background ?? {};\n    return {\n      orient: this.getOrient(),\n      select: this._option.disableTriggerEvent === true ? false : spec.select,\n      hover: this._option.disableTriggerEvent === true ? false : spec.hover,\n      line: transformAxisLineStyle(spec.domainLine),\n      label: {\n        style: isFunction(spec.label.style)\n          ? (datum: Datum, index: number, data: Datum[], layer?: number) => {\n              const style = spec.label.style(datum.rawValue, index, datum, data, layer);\n              return transformToGraphic(mergeSpec({}, this._theme.label?.style, style));\n            }\n          : transformToGraphic(spec.label.style),\n        formatMethod: spec.label.formatMethod\n          ? (value: any, datum: any, index: number) => {\n              return spec.label.formatMethod(datum.rawValue, datum);\n            }\n          : null,\n        state: transformAxisLabelStateStyle(spec.label.state),\n        ...labelSpec\n      },\n      tick:\n        spec.tick.visible === false\n          ? { visible: false }\n          : {\n              visible: spec.tick.visible,\n              length: spec.tick.tickSize,\n              inside: spec.tick.inside,\n              alignWithLabel: spec.tick.alignWithLabel,\n              style: isFunction(spec.tick.style)\n                ? (value: number, index: number, datum: Datum, data: Datum[]) => {\n                    const style = (spec.tick.style as any)(value, index, datum, data);\n                    return transformToGraphic(mergeSpec({}, this._theme.tick?.style, style));\n                  }\n                : transformToGraphic(spec.tick.style),\n              state: transformStateStyle(spec.tick.state),\n              dataFilter: spec.tick.dataFilter\n            },\n      subTick:\n        spec.subTick.visible === false\n          ? { visible: false }\n          : {\n              visible: spec.subTick.visible,\n              length: spec.subTick.tickSize,\n              inside: spec.subTick.inside,\n              count: spec.subTick.tickCount,\n              style: isFunction(spec.subTick.style)\n                ? (value: number, index: number, datum: Datum, data: Datum[]) => {\n                    const style = (spec.subTick.style as any)(value, index, datum, data);\n                    return transformToGraphic(mergeSpec({}, this._theme.subTick?.style, style));\n                  }\n                : transformToGraphic(spec.subTick.style),\n              state: transformStateStyle(spec.subTick.state)\n            },\n      title:\n        spec.title.visible === false\n          ? { visible: false }\n          : {\n              visible: spec.title.visible,\n              position: spec.title.position,\n              space: spec.title.space,\n              autoRotate: false, // 默认不对外提供该配置\n              angle: titleAngle ? degreeToRadian(titleAngle) : null,\n              textStyle: mergeSpec({}, titleTextStyle, transformToGraphic(spec.title.style)),\n              padding: spec.title.padding,\n              shape:\n                spec.title.shape?.visible === false\n                  ? { visible: false }\n                  : {\n                      visible: spec.title.shape?.visible,\n                      space: spec.title.shape?.space,\n                      style: transformToGraphic(spec.title.shape?.style)\n                    },\n              background:\n                titleBackgroundSpec.visible === false\n                  ? { visible: false }\n                  : {\n                      visible: titleBackgroundSpec.visible,\n                      style: transformToGraphic(titleBackgroundSpec.style)\n                    },\n              state: {\n                text: transformStateStyle(spec.title.state),\n                shape: transformStateStyle(spec.title.shape?.state),\n                background: transformStateStyle(spec.title.background?.state)\n              },\n              pickable: spec.title.style?.pickable !== false,\n              childrenPickable: spec.title.style?.pickable !== false,\n              ...spec.title\n            },\n      panel:\n        backgroundSpec.visible === false\n          ? { visible: false }\n          : {\n              visible: backgroundSpec.visible,\n              style: transformToGraphic(backgroundSpec.style),\n              state: transformStateStyle(backgroundSpec.state)\n            }\n    };\n  }\n\n  protected _getGridAttributes() {\n    const spec = this._spec;\n    return {\n      alternateColor: spec.grid.alternateColor,\n      alignWithLabel: spec.grid.alignWithLabel,\n      style: isFunction(spec.grid.style)\n        ? () => {\n            return (datum: Datum, index: number) => {\n              const style = spec.grid.style(datum.datum?.rawValue, index, datum.datum);\n              return transformToGraphic(mergeSpec({}, this._theme.grid?.style, style));\n            };\n          }\n        : transformToGraphic(spec.grid.style),\n      subGrid:\n        spec.subGrid.visible === false\n          ? { visible: false }\n          : {\n              type: 'line',\n              visible: spec.subGrid.visible,\n              alternateColor: spec.subGrid.alternateColor,\n              style: transformToGraphic(spec.subGrid.style)\n            }\n    };\n  }\n\n  protected _initTickDataSet<T extends ITickDataOpt>(options: T) {\n    registerDataSetInstanceParser(this._option.dataSet, 'scale', scaleParser);\n    registerDataSetInstanceTransform(this._option.dataSet, 'ticks', ticks);\n    const tickData = new DataView(this._option.dataSet, { name: `${this.type}_${this.id}_ticks` })\n      .parse(this._scale, {\n        type: 'scale'\n      })\n      .transform(\n        {\n          type: 'ticks',\n          options\n        },\n        false\n      );\n    return tickData;\n  }\n\n  protected _tickTransformOption(coordinateType: CoordinateType): ITickDataOpt {\n    const tick = this._tick || {};\n    const label = this._spec.label || {};\n    const { tickCount, forceTickCount, tickStep, tickMode } = tick;\n    const { style: labelStyle, formatMethod: labelFormatter, minGap: labelGap } = label;\n    return {\n      sampling: this._spec.sampling !== false,\n      tickCount,\n      forceTickCount,\n      tickStep,\n      tickMode,\n\n      axisOrientType: this._orient,\n      coordinateType: coordinateType,\n\n      labelStyle,\n      labelFormatter,\n      labelGap\n    };\n  }\n\n  addTransformToTickData(options: ITransformOptions, execute?: boolean) {\n    this._tickData?.getDataView()?.transform(options, execute);\n  }\n\n  dataToPosition(values: any[]): number {\n    return this._scale.scale(values);\n  }\n}\n\nexport const registerAxis = () => {\n  registerVGrammarAxis();\n  registerVGrammarGrid();\n  registerComponentMark();\n  Factory.registerAnimation('axis', () => ({\n    appear: {\n      custom: GroupFadeIn\n    },\n    update: {\n      custom: GroupTransition\n    },\n    exit: {\n      custom: GroupFadeOut\n    }\n  }));\n};\n"]}