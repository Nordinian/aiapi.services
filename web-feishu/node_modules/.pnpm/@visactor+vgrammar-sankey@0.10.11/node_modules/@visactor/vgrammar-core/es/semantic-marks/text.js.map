{"version":3,"sources":["../src/semantic-marks/text.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,eAAe,EAAE,MAAM,gBAAgB,CAAC;AAEjD,OAAO,EAAE,IAAI,EAAE,MAAM,cAAc,CAAC;AACpC,OAAO,EAAE,iBAAiB,EAAE,MAAM,uBAAuB,CAAC;AAC1D,OAAO,EAAE,gBAAgB,EAAE,MAAM,+BAA+B,CAAC;AAEjE,MAAM,OAAO,IAAK,SAAQ,IAAI;IAK5B,cAAc,CAAC,SAAc,EAAE,QAAiB;QAC9C,MAAM,UAAU,GAAG,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,IAAI,CAAC;QACnC,MAAM,MAAM,GAAG,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,MAAK,MAAM,CAAC;QAE3C,MAAM,WAAW,GAAG,iBAAiB,CACnC,IAAa,EACb,MAAM,CAAC,CAAC,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,eAAe,CAAC,IAAI,EACxD,SAAS,CACV,CAAC;QAEF,IAAI,MAAM,EAAE;YACV,SAAS,CAAC,UAAU,GAAG,EAAE,CAAC;SAC3B;QAED,OAAO,KAAK,CAAC,cAAc,CAAC,SAAS,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;IAChE,CAAC;IAED,sBAAsB;;QACpB,OAAO,CAAA,MAAA,IAAI,CAAC,mBAAmB,EAAE,0CAAE,IAAI,MAAK,UAAU,CAAC,CAAC,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC,gBAAgB,CAAC,IAAI,CAAC;IAC7G,CAAC;IAED,OAAO;QACL,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;;AA3BM,aAAQ,GAAG,eAAe,CAAC,IAAI,CAAC","file":"text.js","sourcesContent":["import { GrammarMarkType } from '../graph/enums';\nimport type { IMark, MarkSpec } from '../types';\nimport { Mark } from '../view/mark';\nimport { createGraphicItem } from '../graph/util/graphic';\nimport { transformsByType } from '../graph/attributes/transform';\n\nexport class Text extends Mark {\n  static markType = GrammarMarkType.text;\n  declare markType: GrammarMarkType.text;\n  protected declare spec: MarkSpec;\n\n  addGraphicItem(initAttrs: any, groupKey?: string) {\n    const textConfig = initAttrs?.text;\n    const isRich = textConfig?.type === 'rich';\n\n    const graphicItem = createGraphicItem(\n      this as IMark,\n      isRich ? GrammarMarkType.richtext : GrammarMarkType.text,\n      initAttrs\n    );\n\n    if (isRich) {\n      initAttrs.textConfig = [];\n    }\n\n    return super.addGraphicItem(initAttrs, groupKey, graphicItem);\n  }\n\n  getAttributeTransforms() {\n    return this.getGroupGraphicItem()?.type === 'richtext' ? transformsByType.richtext : transformsByType.text;\n  }\n\n  release(): void {\n    super.release();\n  }\n}\n"]}