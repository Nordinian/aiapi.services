"use strict";

Object.defineProperty(exports, "__esModule", {
    value: !0
}), exports.permit = exports.prevent = exports.initializeEventConfig = void 0;

const vutils_1 = require("@visactor/vutils"), constants_1 = require("./constants");

function initializeEventConfig(config) {
    const eventsConfig = Object.assign({
        defaults: {}
    }, config), unpack = (obj, keys) => {
        keys.forEach((k => {
            (0, vutils_1.isArray)(obj[k]) && (obj[k] = obj[k].reduce(((set, key) => (set[key] = !0, 
            set)), {}));
        }));
    };
    return unpack(eventsConfig.defaults, [ "prevent", "allow" ]), unpack(eventsConfig, [ constants_1.EVENT_SOURCE_VIEW, constants_1.EVENT_SOURCE_WINDOW ]), 
    eventsConfig;
}

function prevent(eventConfig, type) {
    const def = eventConfig.defaults, prevent = def.prevent, allow = def.allow;
    return !1 !== prevent && !0 !== allow && (!0 === prevent || !1 === allow || (prevent ? prevent[type] : !!allow && !allow[type]));
}

function permit(eventConfig, key, type) {
    const rule = null == eventConfig ? void 0 : eventConfig[key];
    return !(!1 === rule || (0, vutils_1.isObject)(rule) && !rule[type]);
}

exports.initializeEventConfig = initializeEventConfig, exports.prevent = prevent, 
exports.permit = permit;
//# sourceMappingURL=events.js.map
